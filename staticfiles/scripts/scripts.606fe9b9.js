!function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){!function(){"use strict";var a="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),c="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),d=(b.defineLocale||b.lang).call(b,"es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(b,d){return/-MMM-/.test(d)?c[b.month()]:a[b.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return d}(),a.fullCalendar.datepickerLang("es","es",{closeText:"Cerrar",prevText:"&#x3C;Ant",nextText:"Sig&#x3E;",currentText:"Hoy",monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],dayNamesShort:["dom","lun","mar","mié","jue","vie","sáb"],dayNamesMin:["D","L","M","X","J","V","S"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),a.fullCalendar.lang("es",{buttonText:{month:"Mes",week:"Semana",day:"Día",list:"Agenda"},allDayHtml:"Todo<br/>el día",eventLimitText:"más"})}),angular.module("ngLocale",[],["$provide",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["a.m.","p.m."],DAY:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],ERANAMES:["antes de Cristo","después de Cristo"],ERAS:["a. C.","d. C."],FIRSTDAYOFWEEK:6,MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],STANDALONEMONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"d/M/yy HH:mm",shortDate:"d/M/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"Gs.",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤ -",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"es-py",localeID:"es_PY",pluralCat:function(a,c){return 1==a?b.ONE:b.OTHER}})}]),angular.module("ur.file",[]).config(["$provide",function(a){function b(a,b,d,e,f,g,h){var i,j=new c;return j.open(a,b,!0),g&&(j.type=g,d["Content-Type"]=g),angular.forEach(d,function(a,b){a?j.setRequestHeader(b,a):null}),h.register(j),j.onreadystatechange=function(){if(4==j.readyState){h.unregister(j);var a=j.response||j.responseText;e(i=i||j.status,a,j.getAllResponseHeaders())}},f&&(j.withCredentials=!0),j}var c=window.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}throw new Error("This browser does not support XMLHttpRequest.")};a.decorator("$httpBackend",["$delegate","$window","uploadManager",function(a,c,e){return function(c,f,g,h,i,j,k){var l=!1,m=e;return g&&angular.isObject(g)&&(l=d(g)),angular.isObject(g)&&(g&&g.name&&!i["X-File-Name"]&&(i["X-File-Name"]=encodeURI(g.name)),angular.forEach({size:"X-File-Size",lastModifiedDate:"X-File-Last-Modified"},function(a,b){g&&g[b]&&(i[a]||(i[a]=g[b]))})),g&&g instanceof Blob?b(c,f,i,h,k,g.type,m).send(g):void a(c,f,g,h,i,j,k)}}]);var d=function(a){for(var b in a){if(a[b]instanceof Blob)return!0;if((angular.isObject(a[b])||angular.isArray(a[b]))&&d(a[b]))return!0}return!1};a.decorator("$http",["$delegate",function(a){var b=a.defaults.transformRequest[0];return a.defaults.transformRequest=[function(a){return a instanceof Blob?a:b(a)}],a}])}]).service("fileHandler",["$q","$rootScope",function(a,b){return{load:function(c){var d=a.defer(),e=angular.extend(new FileReader,{onload:function(a){d.resolve(a.target.result),b.$$phase||b.$apply()},onerror:function(a){d.reject(a),b.$$phase||b.$apply()},onabort:function(a){d.reject(a),b.$$phase||b.$apply()}});return e.readAsDataURL(c),angular.extend(d.promise,{abort:function(){e.abort()}})},meta:function(a){return{name:a.name,size:a.size,lastModifiedDate:a.lastModifiedDate}},toBlob:function(a){var b={};a instanceof File&&(b=this.meta(a),a=a.toDataURL());var c,d=a.split(","),e=d[0].split(":");if(2!==d.length||2!==e.length||"data"!==e[0])throw new Error("Invalid data URI.");e=e[1].split(";"),c="base64"===e[1]?atob(d[1]):decodeURI(d[1]);for(var f=c.length,g=new ArrayBuffer(f),h=new Uint8Array(g),i=0;f>i;i++)h[i]=c.charCodeAt(i);return angular.extend(new Blob([h],{type:e[0]}),b)}}}]).service("uploadManager",["$rootScope",function(a){angular.extend(this,{id:null,uploads:{},capture:function(a){this.id=a,this.uploads[a]={loaded:0,total:0,percent:0,object:null}},register:function(b){if(null===this.id)return!1;b._idXhr=this.id,this.id=null,this.uploads[b._idXhr].object=b;var c=this;return b.upload.onprogress=function(d){d.lengthComputable&&(c.uploads[b._idXhr].loaded=d.loaded,c.uploads[b._idXhr].total=d.total,c.uploads[b._idXhr].percent=Math.round(d.loaded/d.total*100),a.$apply())},!0},unregister:function(a){delete this.uploads[a._idXhr]},get:function(a){return this.uploads[a]?this.uploads[a]:!1},abort:function(a){return this.uploads[a]?this.uploads[a].object.abort():!1}})}]).directive("type",["$parse",function(a){return{scope:!1,priority:1,require:"?ngModel",link:function(b,c,d,e){"file"===d.type.toLowerCase()&&e&&c.bind("change",function(c){if(!c.target.files||!c.target.files.length||!c.target.files[0])return!0;var f,g=d.multiple?c.target.files:c.target.files[0];e.$render=function(){},b.$apply(function(b){f=b.$index,a(d.ngModel).assign(b,g)}),b.$index=f,d.change?b.$eval(d.change):null})}}}]).directive("dropTarget",["$parse","fileHandler",function(a,b){return{scope:!1,restrict:"EAC",require:"?ngModel",link:function(b,c,d,e){function f(a){a.stopPropagation(),a.preventDefault()}var g=d.multiple,h=d.drop?a(d.drop):null,i=d.ngModel?a(d.ngModel):null;e&&(e.$render=function(){});var j=[],k=!1;c.bind("dragenter",function(a){return f(a),a.target!==this||k?void j.push(a.target):(d.overClass&&c.addClass(d.overClass),void(k=!0))}),c.bind("dragleave",function(a){return f(a),0===j.length&&k?(d.overClass&&c.removeClass(d.overClass),void(k=!1)):void j.pop()}),c.bind("dragover",function(a){f(a)}),c.bind("drop",function(a){f(a),d.overClass&&c.removeClass(d.overClass),k=!1,a=a.originalEvent||a;var e=a.dataTransfer.files;if(e.length){if(e=g?e:e[0],i&&i.assign(b,e),!h)return b.$$phase?null:b.$apply();var j={$event:a};j["$file"+(g?"s":"")]=e;var l=function(){h(b,j)};b.$$phase?l():b.$apply(l)}})}}}]);var saveAs=saveAs||function(a){if(!("undefined"==typeof a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/constructor/i.test(a.HTMLElement),h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},i="application/octet-stream",j=4e4,k=function(a){var b=function(){"string"==typeof a?c().revokeObjectURL(a):a.remove()};setTimeout(b,j)},l=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){h(f)}}},m=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},n=function(b,h,j){j||(b=m(b));var n,o=this,p=b.type,q=p===i,r=function(){l(o,"writestart progress write writeend".split(" "))},s=function(){if(q&&g&&a.FileReader){var d=new FileReader;return d.onloadend=function(){var b=d.result;a.location.href="data:attachment/file"+b.slice(b.search(/[,;]/)),o.readyState=o.DONE,r()},d.readAsDataURL(b),void(o.readyState=o.INIT)}if(n||(n=c().createObjectURL(b)),q)a.location.href=n;else{var e=a.open(n,"_blank");e||(a.location.href=n)}o.readyState=o.DONE,r(),k(n)};return o.readyState=o.INIT,e?(n=c().createObjectURL(b),void setTimeout(function(){d.href=n,d.download=h,f(d),r(),k(n),o.readyState=o.DONE})):void s()},o=n.prototype,p=function(a,b,c){return new n(a,b||a.name||"download",c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=m(a)),navigator.msSaveOrOpenBlob(a,b)}:(o.abort=function(){},o.readyState=o.INIT=0,o.WRITING=1,o.DONE=2,o.error=o.onwritestart=o.onprogress=o.onwrite=o.onabort=o.onerror=o.onwriteend=null,p)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return saveAs}),angular.module("frontendmuApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMaterial","md.data.table","ur.file","ngMaterialSidemenu"]).config(["$routeProvider","$mdThemingProvider","$httpProvider","$resourceProvider","$interpolateProvider","$mdDateLocaleProvider",function(a,b,c,d,e,f){e.startSymbol("[[").endSymbol("]]"),c.defaults.xsrfCookieName="csrftoken",c.defaults.xsrfHeaderName="X-CSRFToken",d.defaults.stripTrailingSlashes=!1,b.theme("default").primaryPalette("green").accentPalette("light-green",{"default":"500"}),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/logout",{templateUrl:"views/logout.html",controller:"LogoutCtrl",controllerAs:"logout"}).when("/inventario",{templateUrl:"views/inventario.html",controller:"InventarioCtrl",controllerAs:"inventario"}).when("/establecimiento",{templateUrl:"views/establecimiento.html",controller:"EstablecimientoCtrl",controllerAs:"establecimiento"}).when("/potrero",{templateUrl:"views/potrero.html",controller:"PotreroCtrl",controllerAs:"potrero"}).when("/nutricion",{templateUrl:"views/nutricion.html",controller:"NutricionCtrl",controllerAs:"nutricion"}).when("/sanitacion",{templateUrl:"views/sanitacion.html",controller:"SanitacionCtrl",controllerAs:"sanitacion"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardCtrl",controllerAs:"dashboard"}).when("/mortandad",{templateUrl:"views/mortandad.html",controller:"MortandadCtrl",controllerAs:"mortandad"}).when("/categoria",{templateUrl:"views/categoria.html",controller:"CategoriaCtrl",controllerAs:"categoria"}).when("/raza",{templateUrl:"views/raza.html",controller:"RazaCtrl",controllerAs:"raza"}).when("/meteorologia",{templateUrl:"views/meteorologia.html",controller:"MeteorologiaCtrl",controllerAs:"meteorologia"}).when("/empleados",{templateUrl:"views/empleado.html",controller:"EmpleadoCtrl",controllerAs:"empleado"}).when("/compra",{templateUrl:"views/compra.html",controller:"CompraCtrl"}).when("/venta",{templateUrl:"views/venta.html",controller:"VentaCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location",function(a,b){a.$on("$routeChangeStart",function(c,d,e,f){null==a.establecimiento&&b.path("")}),a.Utils={keys:Object.keys}}]),angular.module("frontendmuApp").controller("MainCtrl",["$scope","ServerData","Establecimiento","$location","$rootScope",function(a,b,c,d,e){a.establecimientos=[],a.obj=b,a.establecimientos=c.get(function(b){a.establecimientos=b.results}),a.seleccionar=function(b){a.obj.establecimiento=b,e.establecimiento=b,d.path("/inventario/")}}]),angular.module("frontendmuApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("frontendmuApp").controller("LoginCtrl",["$scope","$location","DjangoAuth","Validate",function(a,b,c,d){c.authenticated&&b.path("/"),a.model={username:"",password:""},a.complete=!1,a.login=function(e){a.errors=[],d.form_validation(e,a.errors),e.$invalid||c.login(a.model.username,a.model.password).then(function(a){b.path("/")},function(b){a.errors=b})}}]),angular.module("frontendmuApp").controller("LogoutCtrl",["$scope","$location","DjangoAuth","ServerData",function(a,b,c,d){c.logout()}]),angular.module("frontendmuApp").controller("MasterCtrl",["$scope","$location","ServerData","Establecimiento","Menu","$rootScope","$timeout","$mdSidenav",function(a,b,c,d,e,f,g,h){function i(b,c,d){var e;return function(){var d=a,f=Array.prototype.slice.call(arguments);g.cancel(e),e=g(function(){e=void 0,b.apply(d,f)},c||10)}}function j(a){return i(function(){h(a).toggle().then(function(){$log.debug("toggle "+a+" is done")})},200)}function k(a){return m.isSectionSelected(a)}function l(a){m.toggleSelectSection(a)}var m=e,n=this;a.toggleLeft=j("left"),a.establecimientos=[],a.obj=c,d.get(function(b){a.establecimientos=b.results}),a.seleccionar=function(c){a.obj.establecimiento=c,f.establecimiento=c,b.path("/inventario/")},n.isOpen=k,n.toggleOpen=l,n.autoFocusContent=!1,n.menu=m,n.status={isFirstOpen:!0,isFirstDisabled:!1},a.vm=n}]),angular.module("frontendmuApp").controller("InventarioCtrl",["$scope","$filter","$mdDialog","$mdMedia","Animal","Lote","ServerData","Categoria","Raza","Mortandad","Establecimiento",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){a.animales=b}function m(b){a.lotes=b}var n=g;a.estados_sanitarios=[{c:"E",display:"En fecha"},{c:"N",display:"No esta en fecha"},{c:"D",display:"En fecha"}],a.categorias=h.get(function(b){a.categorias=b}),a.razas=i.get(function(b){a.razas=b}),a.options={boundaryLinks:!1,pageSelect:!0},a.queryAnimales={establecimiento:g.establecimiento.id,limit:20,estado:"V",ordering:"lote__nombre",page:1},a.selectedAnimales=[],a.getAnimales=function(){console.log(a.queryAnimales),a.promiseAnimales=e.get(a.queryAnimales,l).$promise,a.selectedAnimales=[]},a.getAnimales(),a.editAnimal=function(d){c.show({templateUrl:"views/dialogs/dialogo_animal.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Categoria","Raza","Lote",function(a,b,c,e,f,g){a.categorias=[],a.razas=[],a.lotes=[],a.lotes=g.get({establecimiento:n.establecimiento.id},function(b){a.lotes=b.results}),a.categorias=e.get(function(b){a.categorias=b.results}),a.razas=f.get(function(b){a.razas=b.results}),a.newAnimal={},d&&(a.newAnimal=d),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(e){if("guardar"===e)if(d)c.update({id:a.newAnimal.id},a.newAnimal,function(c){a.newAnimal=c,b.hide(a.newAnimal)});else{a.newAnimal.estado="V",a.newAnimal.establecimiento=n.establecimiento.id;var f=new c(a.newAnimal);f.$save(function(){},function(a){console.log(a)}),b.hide(f)}}}]}).then(function(c){if(c!==!0){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id?angular.extend(d,c):a.animales.results.unshift(c)}a.getLotes()},function(){a.alert="You cancelled the dialog."})},a.deleteAnimal=function(d){var f=c.confirm().title("Estas seguro de que quieres eliminar?").textContent(d.categoria_nombre+"- Caravana: "+d.caravana+" - Raza: "+d.raza_nombre+" - Carimbo: "+d.carimbo).ariaLabel("Eliminar Animal").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(f).then(function(){e["delete"]({id:d.id},d,function(c){a.getLotes();var e=b("filter")(a.animales.results,function(a){return a.id.toString()===d.id.toString()})[0];a.animales.results.shift(e)})},function(){console.log("Cancelaste")})},a.deleteListaAnimal=function(b){c.show({templateUrl:"views/dialogs/dialogo_eliminar.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","$filter",function(a,c,d,e){a.lista=b,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(a){"guardar"===a?b.length>=1&&angular.forEach(b,function(a){d["delete"]({id:a.id},a,function(a){console.log("eliminado: "+a.caravana),c.hide(b)})}):c.hide(b)}}]}).then(function(b){b!==!0&&(a.getAnimales(),a.getLotes())},function(){a.alert="You cancelled the dialog."})},a.mudarAnimales=function(d){c.show({templateUrl:"views/dialogs/dialogo_mudar.html",targetEvent:null,controller:["$scope","$mdDialog","Lote","Animal","$filter",function(a,b,c,e,f){a.lotes=[],a.lotes=c.get({establecimiento:n.establecimiento.id},function(b){a.lotes=b.results}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d.length>=1&&(angular.forEach(d,function(b){b.lote=a.form.lote,e.update({id:b.id},b,function(a){console.log(a)});var c=f("filter")(a.lotes,function(b){return b.id.toString()===a.form.lote.toString()})[0];b.lote_nombre=c.nombre}),b.hide(d))}}]}).then(function(c){c!==!0&&(a.getLotes(),angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)}))},function(){a.alert="You cancelled the dialog."})},a.recategorizar=function(d){c.show({templateUrl:"views/dialogs/dialogo_recategorizar.html",targetEvent:null,controller:["$scope","$mdDialog","Categoria","Animal","$filter",function(a,b,c,e,f){a.categorias=[],a.categorias=c.get(function(b){a.categorias=b.results}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d.length>=1&&(angular.forEach(d,function(b){b.categoria=a.form.categoria,e.update({id:b.id},b,function(a){console.log(a)});var c=a.form.categoria,d=f("filter")(a.categorias,function(a){return a.id.toString()===c.toString()})[0];b.categoria_nombre=d.nombre}),b.hide(d))}}]}).then(function(c){c!==!0&&angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)})},function(){a.alert="You cancelled the dialog."})},a.agruparEnLote=function(d){c.show({templateUrl:"views/dialogs/dialogo_lote.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData",function(a,b,c,g){a.potreros=[],a.potreros=c.get({establecimiento:g.establecimiento.id,lote:""},function(b){a.potreros=b.results}),a.newLote={},a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=g.establecimiento.id,a.newLote.animales=[],a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c){var g=new f(a.newLote);g.$save(function(a){d.length>=1&&(angular.forEach(d,function(a){a.lote=g.id,e.update({id:a.id},a,function(a){console.log(a)}),a.lote_nombre=g.nombre}),b.hide(d))},function(a){console.log(a)}),b.hide(d)}}}]}).then(function(c){c!==!0&&(a.getLotes(),angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)}))},function(){a.alert="You cancelled the dialog."})},a.mortandad=function(b){c.show({templateUrl:"views/dialogs/dialogo_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Mortandad","ServerData",function(a,c,d,e,f){a.newMortandad={},a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(d){if("guardar"===d&&b.length>=1){var g=[];angular.forEach(b,function(a){g.push(a.id)});var h=new e(a.form);h.establecimiento=f.establecimiento.id,h.animales=g,h.$save(function(a){console.log(a)},function(a){console.log(a)}),c.hide(b)}}}]}).then(function(b){b!==!0&&a.getAnimales()},function(){a.alert="You cancelled the dialog."})},a.queryLotes={establecimiento:g.establecimiento.id,ordering:"id",page:1},a.selectedLotes=[],a.getLotes=function(){a.promiseLotes=f.get(a.queryLotes,m).$promise,a.selectedLotes=[]},a.getLotes(),a.deleteLote=function(b){var d=c.confirm().title("Estas seguro de que quieres eliminar?").content("Lote: "+b.nombre+" - Potrero: "+b.potrero_nombre+" - Cantidad de animales: "+b.animales.length).ariaLabel("Lucky day").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(d).then(function(){f["delete"]({id:b.id},b,function(a){console.log(a),console.log(g),g.establecimiento=k.get({id:g.establecimiento.id}),console.log(g)}),a.lotes.results.splice(a.lotes.results.indexOf(b),1),a.selectedLotes=[]},function(){a.status="Se eliminó correctamente."})},a.editLote=function(d){c.show({templateUrl:"views/dialogs/dialogo_lote.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData","Establecimiento",function(a,b,c,e,g){a.potreros=[],a.potreros=c.get({establecimiento:e.establecimiento.id,lote:""},function(b){a.potreros=b.results}),a.newLote={},d?a.newLote=d:(a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=n.establecimiento.id,a.newLote.animales=[]),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c)if(d)f.update({id:a.newLote.id},a.newLote,function(c){a.newLote=c,b.hide(a.newLote)});else{var h=new f(a.newLote);h.$save(function(){console.log(e),e.establecimiento=g.get({id:e.establecimiento.id}),console.log(e)},function(a){console.log(a)}),b.hide(h)}}}]}).then(function(c){if(c!==!0){var d=b("filter")(a.lotes.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id?angular.extend(d,c):a.lotes.results.unshift(c)}},function(){a.alert="You cancelled the dialog."})},a.editMortandad=function(b){c.show({templateUrl:"views/dialogs/dialogo_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Mortandad",function(a,c,d,e){a.hola="hola",a.form={},b&&(a.form=b,a.form.fecha=new Date(b.fecha),console.log(a.form)),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(d){"guardar"===d&&b&&e.update({id:a.form.id},a.form,function(b){a.form=b,c.hide(a.form)})}}]}).then(function(a){console.log(a)},function(){a.alert="You cancelled the dialog."})};var o=XLSX;a.archivo={},a.cargarArchivo=function(b){c.show({templateUrl:"views/dialogs/dialogo_archivo.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","ServerData",function(a,c,d,e){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.archivo=b;var f={1:"Toro",2:"Vaca",3:"Desmamante",4:"Ternero"},g={1:"Brahman",2:"Angus",3:"Brangus",4:"Nelore"},h=function(a,b,c){return b===c?a:(a.hasOwnProperty(b)&&(a[c]=a[b],delete a[b]),a)};angular.forEach(a.archivo,function(a){a=h(a,"N° de Caravana","caravana"),a=h(a,"Código de Raza","raza"),a=h(a,"Código de Categoría","categoria"),a=h(a,"Carimbo","carimbo"),a=h(a,"N° de Caravana de la Madre","caravana_madre"),a=h(a,"Código de Lote","lote"),a=h(a,"Estado sanitario","estado_sanitario"),a.estado="V",a.establecimiento=e.establecimiento.id,"En fecha"===a.estado_sanitario.toString()?(a.estado_sanitario="E",a.estado_sanitario_display="En fecha"):"No esta en fecha"===a.estado_sanitario.toString()?(a.estado_sanitario="N",a.estado_sanitario_display="No esta en fecha"):"Desconocido"===a.estado_sanitario.toString()?(a.estado_sanitario="D",a.estado_sanitario_display="Desconocido"):(a.estado_sanitario="E",a.estado_sanitario_display="En fecha"),a.raza_nombre=g[a.raza],a.categoria_nombre=f[a.categoria]}),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(b){"guardar"===b&&(angular.forEach(a.archivo,function(a){var b=new d(a);console.log(b),b.$save(function(){},function(a){console.log(a)})}),c.hide())}}]}).then(function(){a.getAnimales()},function(){a.alert="You cancelled the dialog."})};var p=function(b){var c={},d=o.utils.sheet_to_row_object_array(b.Sheets[b.SheetNames[0]]);d.length>0&&(c=d),a.cargarArchivo(c),a.model={}};a.handleFile=function(a){console.log(a);var b,c,d=[a.file];for(b=0,c=d[b];b!==d.length;++b){var e=new FileReader;c.name;e.onload=function(a){var b=a.target.result,c=o.read(b,{type:"binary"});console.log("ok"),p(c)},e.readAsBinaryString(c)}}}]),angular.module("frontendmuApp").controller("EstablecimientoCtrl",["$scope","$location","Potrero","Categoria","Raza","Lote","ServerData","$mdDialog","AnimalCaravana",function(a,b,c,d,e,f,g,h,i){a.go=function(a){b.path(a)},a.configuraciones=[{nombre:"Potreros",url:"/potrero"},{nombre:"Lotes",url:"/inventario"},{nombre:"Categorias personalizadas",url:"/categoria"},{nombre:"Razas perzonalizadas",url:"/raza"}],a.cargaAnimales=function(){h.show({templateUrl:"views/dialogs/dialogo_carga_animales.html",targetEvent:null,controller:["$scope","$mdDialog","Raza","Categoria","ServerData","$filter","Animal","AnimalCaravana","Potrero","$rootScope",function(a,b,c,d,e,g,h,i,j,k){function l(a){var b=["N° de Caravana","Código de Raza","Código de Categoría","Carimbo","N° de Caravana de la Madre","Código de Lote","Estado sanitario","Peso especifico"],c=m(a),d=!0;return b.length===c.length?angular.forEach(c,function(a){-1===b.indexOf(a)&&(d=!1)}):d=!1,d}function m(a){var b,c=[],d=XLSX.utils.decode_range(a["!ref"]),e=d.s.r;for(b=d.s.c;b<=d.e.c;++b){var f=a[XLSX.utils.encode_cell({c:b,r:e})],g="UNKNOWN "+b;f&&f.t&&(g=XLSX.utils.format_cell(f)),c.push(g)}return c}function n(a,b){b&&(a+=1462);var c=Date.parse(a);return(c-new Date(Date.UTC(1899,11,30)))/864e5}function o(a){return a.charAt(0).toUpperCase()+a.slice(1)}function p(a){var b=0,c=[],d=!1;return angular.forEach(a,function(a){if(delete a.establecimiento,delete a.animales,delete a.is_hembra,delete a.potrero,d&&delete a.id,0===b){var e=k.Utils.keys(a);angular.forEach(e,function(a){"potrero_nombre"===a?e[$.inArray(a,e)]="Potrero":"peso_promedio"===a?e[$.inArray(a,e)]="Peso promedio":e[$.inArray(a,e)]=o(a)});var f=$.inArray("Codigo",e);0>f?(e[0]="Código",d=!1):(delete a.id,e=k.Utils.keys(a),angular.forEach(e,function(a){e[$.inArray(a,e)]=o(a)}),d=!0,f=$.inArray("Codigo",e),e[f]="Código"),console.log(e),c.push(e);var g=$.map(a,function(a){return a});c.push(g)}else{var g=$.map(a,function(a){return a});c.push(g)}b+=1}),c}function q(a,b){for(var c={},d={s:{c:1e7,r:1e7},e:{c:0,r:0}},e=0;e!==a.length;++e)for(var f=0;f!==a[e].length;++f){d.s.r>e&&(d.s.r=e),d.s.c>f&&(d.s.c=f),d.e.r<e&&(d.e.r=e),d.e.c<f&&(d.e.c=f);var g={v:a[e][f]};if(null!==g.v){var h=XLSX.utils.encode_cell({c:f,r:e});"number"==typeof g.v?g.t="n":"boolean"==typeof g.v?g.t="b":g.v instanceof Date?(g.t="n",g.z=XLSX.SSF._table[14],g.v=n(g.v)):g.t="s",c[h]=g}}return d.s.c<1e7&&(c["!ref"]=XLSX.utils.encode_range(d)),c}function r(a){return this instanceof r?(this.SheetNames=a,void(this.Sheets={})):new r}var s={establecimiento:e.establecimiento.id,ordering:"id",page:1,limit:100};d.get(s,function(b){a.categorias=b}),c.get(s,function(b){a.razas=b}),f.get(s,function(b){a.lotes=b}),j.get(s,function(b){a.potreros=b}),i.get({id:e.establecimiento.id},function(b){a.caravanas=b.animales}),a.crearExcel=function(){a.$parent.crearExcel()},a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1};var t=XLSX;a.paso=1,a.error=[],a.cargado=!1;var u=function(b){var c={},d=b.Sheets[b.SheetNames[0]];if(a.error=[],a.cargado=!1,l(d)){var e=t.utils.sheet_to_row_object_array(d);e.length>0&&(c=e,a.subirArchivo(c),a.cargado=!0,a.model={},document.getElementById("file").value="",document.getElementById("file").onchange())}else a.error.push("Error en el formato del archivo excel. Por favor siga todos los pasos."),console.log(a.error),a.cargado=!1,document.getElementById("file").value="",document.getElementById("file").onchange()};a.guardarAnimales=function(){console.log({animales:a.archivo}),h.create({animales:a.archivo},function(b){console.log(b),b.length&&a.hide()})},a.generarPlantilla=function(){function a(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d!==a.length;++d)c[d]=255&a.charCodeAt(d);return b}var b=new r(["Animales"]),c=q([["N° de Caravana","Código de Raza","Código de Categoría","Carimbo","N° de Caravana de la Madre","Código de Lote","Estado sanitario"]]),d=[{wch:15},{wch:15},{wch:18},{wch:10},{wch:25},{wch:15}];c["!cols"]=d,b.Sheets.Animales=c;var e=XLSX.write(b,{bookType:"xlsx",bookSST:!0,type:"binary"});saveAs(new Blob([a(e)],{type:"application/octet-stream"}),"animales.xlsx")},a.setFiles=function(b){a.$apply(function(a){console.log("files:",b.files),a.files=[];for(var c=0;c<b.files.length;c++)a.files.push(b.files[c]);a.files.length>0&&a.handleFile()})},a.handleFile=function(){var b,c,d=a.files;for(b=0,c=d[b];b!==d.length;++b){var e=new FileReader;c.name;e.onload=function(a){var b=a.target.result,c=t.read(b,{type:"binary"});console.log(c),u(c)},e.readAsBinaryString(c)}},a.subirArchivo=function(b){a.archivo=b;var c=function(a,b,c){return b===c?a:(a.hasOwnProperty(b)&&(a[c]=a[b],delete a[b]),a)};angular.forEach(a.archivo,function(b){b.estado="V",b.establecimiento=e.establecimiento.id,b=c(b,"N° de Caravana","caravana"),b=c(b,"Código de Raza","raza"),b=c(b,"Código de Categoría","categoria"),b=c(b,"Carimbo","carimbo"),b=c(b,"N° de Caravana de la Madre","caravana_madre"),b=c(b,"Código de Lote","lote"),b=c(b,"Estado sanitario","estado_sanitario"),b=c(b,"Peso especifico","peso_especifico"),isNaN(b.carimbo)?(b.carimbo="Error",b.error=!0,a.error.push("El carimbo debe ser numerico (0-9). Caravana Nº: "+b.caravana.toString())):b.carimbo>=0&&b.carimbo<10||(b.carimbo="Error",b.error=!0,a.error.push("El carimbo debe estar en el rango de (0-9). Caravana Nº: "+b.caravana.toString())),isNaN(b.peso_especifico)?(b.peso_especifico="Error",b.error=!0,a.error.push("El peso debe ser numerico. Caravana Nº: "+b.caravana.toString())):b.peso_especifico>0||(b.peso_especifico="Error",b.error=!0,a.error.push("El peso debe ser positivo. Caravana Nº: "+b.caravana.toString())),b.estado="V",b.establecimiento=e.establecimiento.id,"E"===b.estado_sanitario.toString()?b.estado_sanitario_display="En fecha":"N"===b.estado_sanitario.toString()?b.estado_sanitario_display="No esta en fecha":"D"===b.estado_sanitario.toString()?b.estado_sanitario_display="Desconocido":(b.estado_sanitario="",b.estado_sanitario_display="Error",b.error=!0,a.error.push("El estado sanitario no es valido. Por favor use estas opciones: E o N o D. Caravana Nº: "+b.caravana.toString()));var d=g("filter")(a.razas.results,function(a){return a.id.toString()===b.raza.toString()})[0];d?b.raza_nombre=d.nombre:(b.error=!0,b.raza_nombre="Error",a.error.push("El codigo de raza no es valido. Caravana Nº: "+b.caravana.toString()));var f=g("filter")(a.categorias.results,function(a){return a.codigo.toString()===b.categoria.toString()})[0];f?(b.categoria_nombre=f.nombre,b.categoria=f.id):(b.error=!0,b.categoria_nombre="Error",a.error.push("El codigo de categoria no es valido. Caravana Nº: "+b.caravana.toString()));var h=g("filter")(a.lotes.results,function(a){return a.id.toString()===b.lote.toString()})[0];
null!==h?b.lote_nombre=h.nombre:(b.lote_nombre="Error",b.error=!0,a.error.push("El codigo de lote no es valido. Caravana Nº: "+b.caravana.toString()))}),angular.forEach(a.archivo,function(b){if(g("filter")(a.archivo,function(a){return a.caravana.toString()===b.caravana.toString()}).length>1||g("filter")(a.caravanas,function(a){return a.toString()===b.caravana.toString()}).length>0){b.error=!0;var c="Existen caravanas iguales. Caravana Nº: "+b.caravana.toString();0===g("filter")(a.error,function(a){return a===c}).length&&a.error.push(c)}}),console.log(a.error)},a.crearExcel=function(){function b(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d!==a.length;++d)c[d]=255&a.charCodeAt(d);return b}console.log("crearExcel");var c=new r(["Potreros","Lotes","Categorias","Razas"]),d=q(p(a.categorias.results)),e=q(p(a.lotes.results)),f=q(p(a.razas.results)),g=q(p(a.potreros.results)),h=[{wch:20},{wch:20},{wch:20},{wch:20}];g["!cols"]=h,d["!cols"]=h,f["!cols"]=h,e["!cols"]=h,c.Sheets.Potreros=g,c.Sheets.Lotes=e,c.Sheets.Categorias=d,c.Sheets.Razas=f,c.Sheets.Potreros;var i=XLSX.write(c,{bookType:"xlsx",bookSST:!0,type:"binary"});saveAs(new Blob([b(i)],{type:"application/octet-stream"}),"configuracion.xlsx")},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){}}]}).then(function(a){console.log(a)},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("PotreroCtrl",["$scope","Potrero","$mdDialog","$filter","ServerData","Establecimiento",function(a,b,c,d,e,f){function g(b){a.potreros=b}a.queryPotreros={establecimiento:e.establecimiento.id,ordering:"id",page:1},a.selectedPotreros=[],a.getPotreros=function(){a.promisePotreros=b.get(a.queryPotreros,g).$promise,a.selectedPotreros=[]},a.getPotreros(),a.deletePotrero=function(d){console.log(d);var g=c.confirm().title("Estas seguro de que quieres eliminar?").content("Nombre: "+d.nombre+" - Superficie: "+d.superficie+" - Uso: "+d.uso).ariaLabel("Delete potrero").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(g).then(function(){b["delete"]({id:d.id},d,function(b){console.log(b),a.potreros.results.splice(a.potreros.results.indexOf(d),1),console.log(e.establecimiento),f.get({id:e.establecimiento.id},function(a){e.establecimiento=a,console.log(e.establecimiento)})})},function(){a.status="Se eliminó correctamente."})},a.editPotrero=function(b){c.show({templateUrl:"views/dialogs/dialogo_potrero.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData","Establecimiento",function(a,c,d,e,f){a.newPotrero={},b?a.newPotrero=b:(a.newPotrero.nombre="",a.newPotrero.superficie="",a.newPotrero.uso="",a.newPotrero.establecimiento=e.establecimiento.id),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(g){if("guardar"===g)if(b)d.update({id:a.newPotrero.id},a.newPotrero,function(b){a.newPotrero=b,c.hide(a.newPotrero)});else{var h=new d(a.newPotrero);h.$save(function(){console.log(e),e.establecimiento=f.get({id:e.establecimiento.id}),console.log(e)},function(a){console.log(a)}),c.hide(h)}}}]}).then(function(b){if(b!==!0){var c=d("filter")(a.potreros.results,function(a){return a.id.toString()===b.id.toString()})[0];c&&c.id===b.id?angular.extend(c,b):a.potreros.results.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("NutricionCtrl",["$scope","$mdDialog","Nutricion","$filter","ServerData","Lote",function(a,b,c,d,e,f){function g(b){a.lotes=b}function h(b){a.dietas=b}a.queryLotes={establecimiento:e.establecimiento.id,ordering:"nombre",page:1},a.getLotes=function(){a.promiseLotes=f.get(a.queryLotes,g).$promise},a.getLotes(),a.queryDietas={establecimiento:e.establecimiento.id,ordering:"fecha_inicio",page:1},a.selectedDietas=[],a.getDietas=function(){a.queryDietas.lotes&&"todos"===a.queryDietas.lotes.toString()&&delete a.queryDietas.lotes,a.promiseDietas=c.get(a.queryDietas,h).$promise,a.selectedDietas=[]},a.getDietas(),a.deleteDieta=function(e){console.log(e);var f=b.confirm().title("Estas seguro de que quieres eliminar?").content("Tipo: "+e.tipo_nutricion+"<br>Tipo de alimento: "+e.tipo_comida+"<br>Periodo: "+d("date")(new Date(e.fecha_inicio),"dd/MM/yyyy")+" - "+d("date")(new Date(e.fecha_fin),"dd/MM/yyyy")+"<br>").ariaLabel("Delete potrero").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");b.show(f).then(function(){c["delete"]({id:e.id},e,function(b){console.log(b),a.dietas.results.splice(a.dietas.results.indexOf(e),1),a.selectedDietas=[]})},function(){a.status="Se eliminó correctamente."})},a.editDieta=function(c){b.show({templateUrl:"views/dialogs/dialogo_nutricion.html",targetEvent:c,controller:["$scope","$mdDialog","Nutricion","Lote","ServerData",function(a,b,d,e,f){function g(a,b){var c=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),d=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((d-c)/h)}var h=864e5;a.form={},a.calculo_kilos=function(b){var c=g(a.newNutricion.fecha_inicio,a.newNutricion.fecha_fin);console.log(c),b===a.form.gramos?a.form.kilos=b*c/1e3:a.form.gramos=b/c*1e3},a.lotes=[],e.get({establecimiento:f.establecimiento.id},function(b){a.lotes=b.results}),a.alimentos=["Sal mineral","Balanceado","Pastura","Núcleo","Otros"],a.newNutricion={},c&&(a.newNutricion=c,a.newNutricion.fecha_inicio=new Date(c.fecha_inicio),a.newNutricion.fecha_fin=new Date(c.fecha_fin),console.log(a.alimentos.indexOf(a.newNutricion.tipo_comida)),-1===a.alimentos.indexOf(a.newNutricion.tipo_comida)&&(a.form.tipo_comida=a.newNutricion.tipo_comida,a.newNutricion.tipo_comida="Otros"),a.form.kilos=a.newNutricion.kilos,a.calculo_kilos(a.newNutricion.kilos)),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(e){if("guardar"===e)if(c)"Otros"===a.newNutricion.tipo_comida&&(a.newNutricion.tipo_comida=a.form.tipo_comida),a.newNutricion.kilos=a.form.kilos,d.update({id:a.newNutricion.id},a.newNutricion,function(c){a.newNutricion=c,b.hide(a.newNutricion)});else{var g=new d(a.newNutricion);"Otros"===g.tipo_comida&&(g.tipo_comida=a.form.tipo_comida),g.kilos=a.form.kilos,console.log(g),g.establecimiento=f.establecimiento.id,g.$save(function(){},function(a){console.log(a)}),b.hide(g)}}}]}).then(function(b){if(b!==!0){var c=d("filter")(a.dietas,{id:b.id},!0)[0];c&&c.id===b.id?angular.extend(c,b):a.dietas.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("SanitacionCtrl",["$scope","Evento","EventoEstablecimiento","$mdDialog","$filter","ServerData",function(a,b,c,d,e,f){b.query(function(b){a.eventos=b,angular.element("#calendar").fullCalendar("addEventSource",a.eventos)}),c.query({establecimiento:f.establecimiento.id},function(b){a.eventos_establecimiento=b,console.log(a.eventos_establecimiento),angular.element("#calendar").fullCalendar("addEventSource",a.eventos_establecimiento)}),a.showAlert=function(a){d.show(d.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Sanitación").textContent(a.title).ariaLabel("Alert Dialog").ok("OK!").targetEvent(null))},angular.element("#calendar").fullCalendar({eventClick:function(b,c,d){if(b.veterinario){var f=e("filter")(a.eventos_establecimiento,{id:b.id},!0)[0];a.agregarEvento(f)}},dayClick:function(b,c,d){var e={start:b,end:b,veterinario:"",establecimiento:f.establecimiento.id,nombre:""};a.agregarEvento(e)}}),a.agregarEvento=function(b){d.show({templateUrl:"views/dialogs/dialogo_evento.html",targetEvent:null,controller:["$scope","$mdDialog","EventoEstablecimiento","$filter","ServerData",function(a,c,d,e,f){a.newEvento={},b&&(b.id?(a.newEvento=b,a.newEvento.start=new Date(b.start),a.newEvento.end=new Date(b.end)):(a.newEvento=b,a.newEvento.start=new Date(b.start),a.newEvento.end=new Date(b.end))),a.deleteEvento=function(a){var b=c.confirm().title("Estas seguro de que quieres eliminar?").textContent(a.title).ariaLabel("Eliminar Vacunación").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(b).then(function(){d["delete"]({id:a.id},a,function(b){angular.element("#calendar").fullCalendar("removeEvents",[a.id])})},function(){console.log("Cancelaste")})},a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(e){if("guardar"===e)if(b.id)console.log(a.newEvento),d.update({id:a.newEvento.id},a.newEvento,function(b){a.newEvento=b,c.hide(a.newEvento)});else{a.newEvento.establecimiento=f.establecimiento.id;var g=new d(a.newEvento);g.$save(function(a){angular.element("#calendar").fullCalendar("addEventSource",[a])},function(a){console.log(a)}),c.hide(g)}}}]}).then(function(b){if(b&&b!==!0){var c=e("filter")(a.eventos_establecimiento,{id:b.id},!0)[0];c&&c.id===b.id?(angular.extend(c,b),angular.element("#calendar").fullCalendar("removeEvents",[b.id]),angular.element("#calendar").fullCalendar("addEventSource",[b])):a.eventos_establecimiento.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("DashboardCtrl",["$scope","Evento","EventoEstablecimiento","$mdDialog","$filter","ServerData",function(a,b,c,d,e,f){b.query(function(b){a.eventos=b,angular.element("#calendar").fullCalendar("addEventSource",a.eventos)}),c.query({establecimiento:f.establecimiento.id},function(b){a.eventos_establecimiento=b,console.log(a.eventos_establecimiento),angular.element("#calendar").fullCalendar("addEventSource",a.eventos_establecimiento)}),angular.element("#calendar").fullCalendar({})}]),angular.module("frontendmuApp").controller("MortandadCtrl",["$scope","$mdDialog","$filter","ServerData","Mortandad",function(a,b,c,d,e){function f(b){a.mortandades=b}a.queryMortandad={establecimiento:d.establecimiento.id,ordering:"lote__nombre",page:1},a.selectedMortandad=[],a.getMortandad=function(){a.promiseMortandad=e.get(a.queryMortandad,f).$promise,console.log(a.promiseMortandad),a.selectedMortandad=[]},a.getMortandad(),a.deleteMortandad=function(c){b.show({templateUrl:"views/dialogs/dialogo_eliminar_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog","Mortandad","$filter",function(a,b,d,e){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.lista=c,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){"guardar"===a?(c.length>=1&&angular.forEach(c,function(a){d["delete"]({id:a.id},a,function(a){console.log("eliminado: "+a.fecha)})}),b.hide(c)):b.hide()}}]}).then(function(b){b!==!0&&a.getMortandad()},function(){a.alert="You cancelled the dialog."})},a.editMortandad=function(d){b.show({templateUrl:"views/dialogs/dialogo_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Mortandad",function(a,b,c,e){a.hola="hola",a.form={},d&&(a.form=d,a.form.fecha=new Date(d.fecha),console.log(a.form)),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d&&e.update({id:a.form.id},a.form,function(c){a.form=c,b.hide(a.form)})}}]}).then(function(b){if(b!==!0){var d=c("filter")(a.mortandades.results,function(a){return a.id.toString()===b.id.toString()})[0];d&&d.id===b.id?angular.extend(d,b):a.mortandades.results.unshift(b)}},function(){a.alert="You cancelled the dialog."})},a.viewMortandad=function(c){b.show({templateUrl:"views/dialogs/dialogo_view_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog",function(a,b){a.mortandad=c,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(b){a.cancel()}}]}).then(function(a){},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("RazaCtrl",["$scope","Raza","$mdDialog","$filter","ServerData",function(a,b,c,d,e){function f(b){a.razas=b,console.log(a.razas)}a.queryRazas={establecimiento:e.establecimiento.id,ordering:"id",page:1},a.selectedRazas=[],a.getRazas=function(){a.promiseRazas=b.get(a.queryRazas,f).$promise,a.selectedRazas=[]},a.getRazas(),a.deleteRaza=function(b){c.show({templateUrl:"views/dialogs/dialogo_eliminar_raza.html",targetEvent:null,controller:["$scope","$mdDialog","Raza","$filter",function(a,c,d){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.lista=b,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(a){"guardar"===a?(b.length>=1&&angular.forEach(b,function(a){d["delete"]({id:a.id},a,function(a){console.log("Eliminado: "+a.nombre)})}),c.hide(b)):c.hide()}}]}).then(function(b){b!==!0&&a.getRazas()},function(){a.alert="You cancelled the dialog."})},a.editRaza=function(b){c.show({templateUrl:"views/dialogs/dialogo_raza.html",targetEvent:null,controller:["$scope","$mdDialog","Raza","ServerData",function(a,c,d,e){a.newRaza={},b?a.newRaza=b:(a.newRaza.nombre="",a.newRaza.descripcion="",a.newRaza.establecimiento=e.establecimiento.id),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(e){if("guardar"===e)if(b)d.update({id:a.newRaza.id},a.newRaza,function(b){a.newRaza=b,c.hide(a.newRaza)});else{var f=new d(a.newRaza);f.$save(function(){},function(a){console.log(a)}),c.hide(f)}}}]}).then(function(b){if(b!==!0){var c=d("filter")(a.razas.results,function(a){return a.id.toString()===b.id.toString()})[0];c&&c.id===b.id?angular.extend(c,b):a.razas.results.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("CategoriaCtrl",["$scope","Categoria","$mdDialog","$filter","ServerData",function(a,b,c,d,e){function f(b){a.categorias=b,console.log(a.categorias)}a.queryCat={establecimiento:e.establecimiento.id,ordering:"id",page:1},a.selectedCat=[],a.getCat=function(){a.promiseCat=b.get(a.queryCat,f).$promise,a.selectedCat=[]},a.getCat(),a.deleteCat=function(b){c.show({templateUrl:"views/dialogs/dialogo_eliminar_categoria.html",targetEvent:null,controller:["$scope","$mdDialog","Categoria","$filter",function(a,c,d){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.lista=b,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(a){"guardar"===a?(b.length>=1&&angular.forEach(b,function(a){d["delete"]({id:a.id},a,function(a){console.log("Eliminado: "+a.nombre)})}),c.hide(b)):c.hide()}}]}).then(function(b){b!==!0&&a.getCat()},function(){a.alert="You cancelled the dialog."})},a.editCat=function(e){c.show({templateUrl:"views/dialogs/dialogo_categoria.html",targetEvent:null,controller:["$scope","$mdDialog","Raza","ServerData",function(a,c,d,f){a.newCategoria={},e?a.newCategoria=e:(a.newCategoria.codigo="",a.newCategoria.nombre="",a.newCategoria.is_hembra=!1,a.newCategoria.establecimiento=f.establecimiento.id),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(d){if("guardar"===d)if(e)b.update({id:a.newCategoria.id},a.newCategoria,function(b){a.newCategoria=b,c.hide(a.newCategoria)});else{var f=new b(a.newCategoria);f.$save(function(){},function(a){console.log(a)}),c.hide(f)}}}]}).then(function(b){if(b!==!0){var c=d("filter")(a.categorias.results,function(a){return a.id.toString()===b.id.toString()})[0];c&&c.id===b.id?angular.extend(c,b):a.categorias.results.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("MeteorologiaCtrl",["$scope","$mdDialog","ServerData","Meteorologia","$filter",function(a,b,c,d,e){function f(b){a.registros=b,console.log(a.registros)}a.query={q:"Asunción",units:"metric",lang:"es",APPID:"38212c68fe70ee4c21988681e3982a25"},a.getWeather=function(){d.current.get(a.query,function(b){b.dt=1e3*b.dt,"nubes rotas"===b.weather[0].description&&(b.weather[0].description="parcialmente nublado"),b.wind.speed=3.6*b.wind.speed,b.wind.speed=b.wind.speed.toFixed(1),b.main.temp=b.main.temp.toFixed(1),a.current=b}),d.forecast.get(a.query,function(b){b.list.shift(),angular.forEach(b.list,function(a){"nubes rotas"===a.weather[0].description&&(a.weather[0].description="parcialmente nublado"),a.dt=new Date(1e3*a.dt),a.temp.min=a.temp.min.toFixed(1),a.temp.max=a.temp.max.toFixed(1)}),a.forecast=b})},a.getWeather(),a.queryReg={establecimiento:c.establecimiento.id,ordering:"id",page:1},a.selectedReg=[],a.getReg=function(){a.promiseCat=d.server.get(a.queryCat,f).$promise,a.selectedReg=[]},a.getReg(),a.deleteReg=function(c){b.show({templateUrl:"views/dialogs/dialogo_eliminar_registro.html",targetEvent:null,controller:["$scope","$mdDialog","Meteorologia","$filter",function(a,b,d){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.lista=c,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){"guardar"===a?(c.length>=1&&angular.forEach(c,function(a){d.server["delete"]({id:a.id},a,function(a){console.log("Eliminado: "+a.fecha)})}),b.hide(c)):b.hide()}}]}).then(function(b){b!==!0&&a.getReg()},function(){a.alert="You cancelled the dialog."})},a.editReg=function(c){b.show({templateUrl:"views/dialogs/dialogo_meteorologia.html",targetEvent:null,controller:["$scope","$mdDialog","ServerData",function(a,b,e){a.newRegistro={},c?a.newRegistro=c:(a.newRegistro.fecha="",a.newRegistro.cantidad=0,a.newRegistro.establecimiento=e.establecimiento.id),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(e){if("guardar"===e)if(c)d.server.update({id:a.newRegistro.id},a.newRegistro,function(c){a.newRegistro=c,b.hide(a.newRegistro)});else{var f=new d.server(a.newRegistro);f.$save(function(){},function(a){console.log(a)}),b.hide(f)}}}]}).then(function(b){if(b!==!0){var c=e("filter")(a.registros.results,function(a){return a.id.toString()===b.id.toString()})[0];c&&c.id===b.id?angular.extend(c,b):a.registros.results.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("EmpleadoCtrl",["$scope","Empleado","Contratista","$mdDialog","$filter","ServerData","$http",function(a,b,c,d,e,f,g){function h(b){a.empleados=b,console.log(a.empleados)}function i(b){a.contratistas=b,console.log(a.contratistas)}a.queryEmp={establecimiento:f.establecimiento.id,ordering:"apellido",page:1},a.selectedEmp=[],a.getEmp=function(){a.promiseEmp=b.get(a.queryEmp,h).$promise,a.selectedEmp=[]},a.getEmp(),a.deleteEmp=function(b){d.show({templateUrl:"views/dialogs/dialogo_eliminar_empleado.html",targetEvent:null,controller:["$scope","$mdDialog","Empleado","$filter",function(a,c,d){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.lista=b,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(a){"guardar"===a?(b.length>=1&&angular.forEach(b,function(a){d["delete"]({id:a.id},a,function(a){console.log("Eliminado: "+a.nombre)})}),c.hide(b)):c.hide()}}]}).then(function(b){b!==!0&&a.getEmp()},function(){a.alert="You cancelled the dialog."})},a.editEmp=function(c){d.show({templateUrl:"views/dialogs/dialogo_empleado.html",targetEvent:null,controller:["$scope","$mdDialog","Raza","ServerData","$http",function(a,d,e,f,g){a.newEmpleado={},c?(a.newEmpleado=c,a.newEmpleado.fecha_nacimiento=new Date(c.fecha_nacimiento),a.newEmpleado.ingreso_empresa=new Date(c.ingreso_empresa)):a.newEmpleado.establecimiento=f.establecimiento.id,a.hide=function(){d.hide()},a.cancel=function(){d.cancel()},a.answer=function(e){if("guardar"===e)if(c)b.update({id:a.newEmpleado.id},a.newEmpleado,function(b){a.newEmpleado=b,d.hide(a.newEmpleado)});else{var f=new b(a.newEmpleado);f.$save(function(){},function(a){console.log(a)}),d.hide(f)}}}]}).then(function(b){if(b!==!0){var c=e("filter")(a.empleados.results,function(a){return a.id.toString()===b.id.toString()})[0];c&&c.id===b.id?angular.extend(c,b):a.empleados.results.unshift(b)}},function(){a.alert="You cancelled the dialog."})},a.queryCon={establecimiento:f.establecimiento.id,ordering:"id",page:1},a.selectedCon=[],a.getCon=function(){a.promiseCon=c.get(a.queryCon,i).$promise,a.selectedCon=[]},a.getCon(),a.deleteCon=function(b){console.log(b),d.show({templateUrl:"views/dialogs/dialogo_eliminar_contratista.html",targetEvent:null,controller:["$scope","$mdDialog","Contratista","$filter",function(a,c,d){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.lista=b,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(a){"guardar"===a?(b.length>=1&&angular.forEach(b,function(a){d["delete"]({id:a.id},a,function(a){console.log("Eliminado: "+a.nombre)})}),c.hide(b)):c.hide()}}]}).then(function(b){b!==!0&&a.getCon()},function(){a.alert="You cancelled the dialog."})},a.editCon=function(b){d.show({templateUrl:"views/dialogs/dialogo_contratista.html",targetEvent:null,controller:["$scope","$mdDialog","Contratista","ServerData",function(a,c,d,e){a.newContratista={},b?(a.newContratista=b,a.newContratista.fecha_nacimiento=new Date(b.fecha_nacimiento)):a.newContratista.establecimiento=e.establecimiento.id,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(e){if("guardar"===e)if(b)d.update({id:a.newContratista.id},a.newContratista,function(b){a.newContratista=b,c.hide(a.newContratista)});else{var f=new d(a.newContratista);f.$save(function(){},function(a){console.log(a)}),c.hide(f)}}}]}).then(function(b){if(b!==!0){var c=e("filter")(a.contratistas.results,function(a){return a.id.toString()===b.id.toString()})[0];c&&c.id===b.id?angular.extend(c,b):a.contratistas.results.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("CompraCtrl",["$scope","$filter","$mdDialog","Animal","Compra",function(a,b,c,d,e){a.compras=[],a.seleccionCompra=[],a.comprasCargadas=!1,a.searchState=!1,a.updateListadoCompras=function(){a.promise=e.get({establecimiento:1},function(b){a.compras=b.results,a.compras!==[]&&(a.comprasCargadas=!0)})},a.updateListadoCompras(),a.query={order:"fecha",limit:5,page:1},a.verDetalleCompra=function(a){console.log(a)},a.abrirFormCarga=function(){c.show({templateUrl:"views/dialogs/dialogo_crear_compra.html",targetEvent:null,controller:"DialogsDialogoCrearCompraCtrl"}).then(function(){a.updateListadoCompras()})},a.prueba=function(a){console.log("Presionaste el click derecho"),console.log(a)},a.search=function(){a.searchState=!0}}]),angular.module("frontendmuApp").controller("DialogsDialogoCrearCompraCtrl",["$scope","$mdDialog","Animal","Categoria","Raza","ServerData","Compra","Lote",function(a,b,c,d,e,f,g,h){var i=f;a.newCompra={},a.newDetalle={},a.newCompra.detalle_compra=[],a.fecha_compra=new Date,a.seleccionDetalleCompra=[],a.categorias=d.get(function(b){a.categorias=b.results}),a.razas=e.get(function(b){a.razas=b.results}),a.lotes=h.get({establecimiento:i.establecimiento.id},function(b){a.lotes=b.results}),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.cargarDetalleCompra=function(b){var c={};c.categoria=b.categoria,c.carimbo=b.carimbo,c.raza=b.raza,c.cantidad=b.cantidad,c.caravana_inicial=b.nro_caravana_inicial,c.lote=b.lote,a.newCompra.detalle_compra.push(c),a.DetalleCompra={}},a.guardarCompra=function(b){a.newCompra.establecimiento=i.establecimiento.id,a.newCompra.fecha_compra=a.fecha_compra.getFullYear()+"-"+a.fecha_compra.getMonth()+"-"+a.fecha_compra.getDate();var c=new g(a.newCompra);c.$save(function(){console.log("Compra realizada")},function(a){console.log(a)}),a.hide()}}]),angular.module("frontendmuApp").controller("DialogsDialogoAnimalCtrl",["$scope","$mdDialog","Animal","Categoria","Raza","Lote","ServerData","animalSeleccionado",function(a,b,c,d,e,f,g,h){var i=g;a.categorias=[],a.razas=[],a.lotes=[],a.lotes=f.get({establecimiento:i.establecimiento.id},function(b){a.lotes=b.results}),a.categorias=d.get(function(b){a.categorias=b.results}),a.razas=e.get(function(b){a.razas=b.results}),a.newAnimal={},h&&(a.newAnimal=h),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(d){if("guardar"===d)if(h)c.update({id:a.newAnimal.id},a.newAnimal,function(c){a.newAnimal=c,b.hide(a.newAnimal)});else{a.newAnimal.estado="V",a.newAnimal.establecimiento=i.establecimiento.id;var e=new c(a.newAnimal);e.$save(function(){},function(a){console.log(a)}),b.hide(e)}}}]),angular.module("frontendmuApp").controller("DialogsDialogoEliminarAnimalCtrl",["$scope","$mdDialog","Animal","$filter",function(a,b,c,d){a.lista=lista,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){"guardar"===a?(lista.length>=1&&angular.forEach(lista,function(a){c["delete"]({id:a.id},a,function(a){console.log("eliminado: "+a.caravana)})}),b.hide(lista)):b.hide(lista)}}]),angular.module("frontendmuApp").controller("DialogsDialogoMudarAnimalCtrl",["$scope","$mdDialog","Lote","Animal","$filter","ServerData","lista",function(a,b,c,d,e,f,g){var h=f;a.lotes=[],a.lotes=c.get({establecimiento:h.establecimiento.id},function(b){a.lotes=b.results}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&g.length>=1&&(angular.forEach(g,function(b){b.lote=a.form.lote,d.update({id:b.id},b,function(a){console.log(a)});var c=e("filter")(a.lotes,function(b){return b.id.toString()===a.form.lote.toString()})[0];b.lote_nombre=c.nombre}),b.hide(g))}}]),angular.module("frontendmuApp").controller("DialogsDialogoRecategorizarAnimalCtrl",["$scope","$mdDialog","Categoria","Animal","$filter","lista",function(a,b,c,d,e,f){a.categorias=[],a.categorias=c.get(function(b){a.categorias=b.results}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&f.length>=1&&(angular.forEach(f,function(b){b.categoria=a.form.categoria,d.update({id:b.id},b,function(a){console.log(a)});var c=a.form.categoria,f=e("filter")(a.categorias,function(a){return a.id.toString()===c.toString()})[0];b.categoria_nombre=f.nombre}),b.hide(f))}}]),angular.module("frontendmuApp").controller("DialogsDialogoLoteCtrl",["$scope","$mdDialog","Potrero","ServerData","Lote","Animal","lista",function(a,b,c,d,e,f,g){a.potreros=[],a.potreros=c.get({establecimiento:d.establecimiento.id},function(b){a.potreros=b.results}),a.newLote={},a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=d.establecimiento.id,a.newLote.animales=[],a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c){var d=new e(a.newLote);d.$save(function(a){g.length>=1&&(angular.forEach(g,function(a){a.lote=d.id,f.update({id:a.id},a,function(a){console.log(a)}),a.lote_nombre=d.nombre}),b.hide(g))},function(a){console.log(a)}),b.hide(g)}}}]),angular.module("frontendmuApp").controller("DialogsDialogoMortandadCtrl",["$scope","$mdDialog","Animal","Mortandad","ServerData","lista",function(a,b,c,d,e,f){a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(g){if("guardar"===g&&f.length>=1){var h=[];angular.forEach(f,function(a){h.push(a.id),a.estado="M",a.lote=null,c.update({id:a.id},a,function(a){})});var i=new d(a.form);i.establecimiento=e.establecimiento.id,i.animales=[],i.$save(function(a){a.animales=h,d.update({id:a.id},a,function(a){console.log(a)})},function(a){console.log(a)}),b.hide(f)}}}]),angular.module("frontendmuApp").controller("DialogsDialogoEditarCrearLoteCtrl",["$scope","$mdDialog","Potrero","ServerData","Lote","loteSeleccionado",function(a,b,c,d,e,f){a.potreros=[],a.potreros=c.get({establecimiento:d.establecimiento.id},function(b){a.potreros=b.results}),a.newLote={},f?a.newLote=f:(a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=d.establecimiento.id,a.newLote.animales=[]),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c)if(f)e.update({id:a.newLote.id},a.newLote,function(c){a.newLote=c,b.hide(a.newLote)});else{var d=new e(a.newLote);d.$save(function(){},function(a){console.log(a)}),b.hide(d)}}}]),angular.module("frontendmuApp").controller("DialogsDialogoArchivoCtrl",["$scope","$mdDialog","Animal","ServerData","result",function(a,b,c,d,e){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.archivo=e;var f={1:"Toro",2:"Vaca",3:"Desmamante",4:"Ternero"},g={1:"Brahman",2:"Angus",3:"Brangus",4:"Nelore"},h=function(a,b,c){return b==c?a:(a.hasOwnProperty(b)&&(a[c]=a[b],delete a[b]),a)};angular.forEach(a.archivo,function(a){a=h(a,"Caravana","caravana"),a=h(a,"Carimbo","carimbo"),a=h(a,"Categoria","categoria"),a=h(a,"Raza","raza"),a=h(a,"Peso especifico","peso_especifico"),a=h(a,"Estado sanitario","estado_sanitario"),a.estado="V",a.establecimiento=d.establecimiento.id,"En fecha"===a.estado_sanitario.toString()?(a.estado_sanitario="E",a.estado_sanitario_display="En fecha"):"No esta en fecha"===a.estado_sanitario.toString()?(a.estado_sanitario="N",a.estado_sanitario_display="No esta en fecha"):"Desconocido"===a.estado_sanitario.toString()?(a.estado_sanitario="D",a.estado_sanitario_display="Desconocido"):(a.estado_sanitario="E",a.estado_sanitario_display="En fecha"),a.raza_nombre=g[a.raza],a.categoria_nombre=f[a.categoria]}),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(d){"guardar"===d&&(angular.forEach(a.archivo,function(a){var b=new c(a);console.log(b),b.$save(function(){},function(a){console.log(a)})}),b.hide())}}]),angular.module("frontendmuApp").service("DjangoAuth",["$q","$http","$cookies","$rootScope","$location","ServerData",function(a,b,c,d,e,f){var g={API_URL:"localhost:8000/rest-auth",use_session:!0,authenticated:null,authPromise:null,request:function(d){c.token&&(b.defaults.headers.common.Authorization="Token "+c.get("token")),h=d.params||{},d=d||{};var e=a.defer(),f=this.API_URL+d.url,g=d.method||"GET",h=h,i=d.data||{};return b({url:f,withCredentials:this.use_session,method:g.toUpperCase(),headers:{"X-CSRFToken":c.csrftoken},params:h,data:i}).success(angular.bind(this,function(a,b,c,d){e.resolve(a,b)})).error(angular.bind(this,function(a,b,c,d){console.log("error syncing with: "+f),a&&(a.status=b),0===b&&(""===a&&(a={},a.status=0,a.non_field_errors=["Could not connect. Please try again."]),null===a&&(a={},a.status=0,a.non_field_errors=["Server timed out. Please try again."])),e.reject(a,b,c,d)})),e.promise},register:function(a,b,c,d,e){var f={username:a,password1:b,password2:c,email:d};return f=angular.extend(f,e),this.request({method:"POST",url:"/registration/",data:f})},login:function(a,e){var f=this;return this.request({method:"POST",url:"/login/",data:{username:a,password:e}}).then(function(a){f.use_session||(b.defaults.headers.common.Authorization="Token "+a.key,c.token=a.key),f.authenticated=!0,d.$broadcast("djangoAuth.logged_in",a)})},logout:function(){var a=this;delete b.defaults.headers.common.Authorization,delete c.token,a.authenticated=!1,d.$broadcast("djangoAuth.logged_out");var e=f;return e.establecimiento="",this.request({method:"POST",url:"/logout/"}).then(function(e){delete b.defaults.headers.common.Authorization,delete c.token,a.authenticated=!1,d.$broadcast("djangoAuth.logged_out")})},changePassword:function(a,b){return this.request({method:"POST",url:"/password/change/",data:{new_password1:a,new_password2:b}})},resetPassword:function(a){return this.request({method:"POST",url:"/password/reset/",data:{email:a}})},profile:function(){return this.request({method:"GET",url:"/user/"})},updateProfile:function(a){return this.request({method:"PATCH",url:"/user/",data:a})},verify:function(a){return this.request({method:"POST",url:"/registration/verify-email/",data:{key:a}})},confirmReset:function(a,b,c,d){return this.request({method:"POST",url:"/password/reset/confirm/",data:{uid:a,token:b,new_password1:c,new_password2:d}})},authenticationStatus:function(b,c){b=b||!1,c=c||!1,(null===this.authPromise||c)&&(this.authPromise=this.request({
method:"GET",url:"/user/"}));var d=this,e=a.defer();return null===this.authenticated||c?this.authPromise.then(function(){d.authenticated=!0,e.resolve()},function(){d.authenticated=!1,b?e.reject("User is not logged in."):e.resolve()}):this.authenticated===!1&&b?e.reject("User is not logged in."):e.resolve(),e.promise},initialize:function(a,b){return this.API_URL=a,this.use_session=b,this.authenticationStatus()}};return g}]),angular.module("frontendmuApp").service("Validate",function(){return{message:{minlength:"This value is not long enough.",maxlength:"This value is too long.",email:"A properly formatted email address is required.",required:"This field is required."},more_messages:{demo:{required:"Here is a sample alternative required message."}},check_more_messages:function(a,b){return(this.more_messages[a]||[])[b]||null},validation_messages:function(a,b,c){var d=[];for(var e in b[a].$error)if(b[a].$error[e]){var f=this.check_more_messages(a,e);f?d.push(f):this.message[e]?d.push(this.message[e]):d.push("Error: "+e)}var g=[];angular.forEach(d,function(a){-1===g.indexOf(a)&&g.push(a)}),c&&(c[a]=g)},form_validation:function(a,b){for(var c in a)"$"!==c.substr(0,1)&&this.validation_messages(c,a,b)}}}),angular.module("frontendmuApp").service("ServerData",function(){return{establecimiento:{}}}),angular.module("frontendmuApp").factory("Establecimiento",["$resource",function(a){return a("/api/establecimiento/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Animal",["$resource",function(a){return a("/api/animal/:id/",null,{update:{method:"PUT"},create:{method:"POST",isArray:!0},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Lote",["$resource",function(a){return a("/api/lote/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Potrero",["$resource",function(a){return a("/api/potrero/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Categoria",["$resource",function(a){return a("/api/categoria/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("AnimalCaravana",["$resource",function(a){return a("/animal/list_caravana/:id/",null)}]),angular.module("frontendmuApp").factory("Raza",["$resource",function(a){return a("/api/raza/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Mortandad",["$resource",function(a){return a("/api/mortandad/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Nutricion",["$resource",function(a){return a("/api/nutricion/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Evento",["$resource",function(a){return a("/api/sanitacion/eventos/:id/",null)}]),angular.module("frontendmuApp").factory("EventoEstablecimiento",["$resource",function(a){return a("/api/sanitacion/eventos_establecimiento/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Menu",["$location","$rootScope",function(a){var b,c=[{name:"Home",type:"link",state:"dashboard"},{name:"Manejo",type:"toggle",pages:[{name:"Inventario",type:"link",state:"inventario",icon:""},{name:"Compra de Animales",state:"compra",type:"link",icon:""},{name:"Venta de animales",state:"venta",type:"link",icon:""},{name:"Mortandad y Abigeo",state:"mortandad",type:"link",icon:""}]},{name:"Sanitación",type:"link",state:"sanitacion"},{name:"Nutrición",type:"link",state:"nutricion"},{name:"Genética",type:"link",state:"genetica"},{name:"Establecimiento",type:"link",state:"establecimiento"}];return b={sections:c,toggleSelectSection:function(a){b.openedSection=b.openedSection===a?null:a},isSectionSelected:function(a){return b.openedSection===a},selectPage:function(c,d){d&&d.url&&a.path(d.url),b.currentSection=c,b.currentPage=d}}}]),angular.module("frontendmuApp").factory("Meteorologia",["$resource",function(a){return{server:a("/api/meteorologia/:id/",null),forecast:a("http://api.openweathermap.org/data/2.5/forecast/daily",null),current:a("http://api.openweathermap.org/data/2.5/weather",null)}}]),angular.module("frontendmuApp").factory("Empleado",["$resource",function(a){return a("/api/empleado/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Contratista",["$resource",function(a){return a("/api/contratista/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Compra",["$resource",function(a){return a("/api/compra/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]).factory("DetalleCompra",["$resource",function(a){return a("/api/detalle_compra/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("VentaCtrl",["$scope","$filter","$mdDialog","$mdMedia","Animal","Lote","ServerData","Categoria","Raza","Mortandad","Establecimiento",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){a.animales=b}function m(b){a.lotes=b}var n=g;a.estados_sanitarios=[{c:"E",display:"En fecha"},{c:"N",display:"No esta en fecha"},{c:"D",display:"En fecha"}],a.categorias=h.get(function(b){a.categorias=b}),a.razas=i.get(function(b){a.razas=b}),a.options={boundaryLinks:!1,pageSelect:!0},a.queryAnimales={establecimiento:g.establecimiento.id,limit:20,estado:"V",ordering:"lote__nombre",page:1},a.selectedAnimales=[],a.getAnimales=function(){console.log(a.queryAnimales),a.promiseAnimales=e.get(a.queryAnimales,l).$promise,a.selectedAnimales=[]},a.getAnimales(),a.editAnimal=function(d){c.show({templateUrl:"views/dialogs/dialogo_animal.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Categoria","Raza","Lote",function(a,b,c,e,f,g){a.categorias=[],a.razas=[],a.lotes=[],a.lotes=g.get({establecimiento:n.establecimiento.id},function(b){a.lotes=b.results}),a.categorias=e.get(function(b){a.categorias=b.results}),a.razas=f.get(function(b){a.razas=b.results}),a.newAnimal={},d&&(a.newAnimal=d),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(e){if("guardar"===e)if(d)c.update({id:a.newAnimal.id},a.newAnimal,function(c){a.newAnimal=c,b.hide(a.newAnimal)});else{a.newAnimal.estado="V",a.newAnimal.establecimiento=n.establecimiento.id;var f=new c(a.newAnimal);f.$save(function(){},function(a){console.log(a)}),b.hide(f)}}}]}).then(function(c){if(c!==!0){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id?angular.extend(d,c):a.animales.results.unshift(c)}a.getLotes()},function(){a.alert="You cancelled the dialog."})},a.deleteAnimal=function(d){var f=c.confirm().title("Estas seguro de que quieres eliminar?").textContent(d.categoria_nombre+"- Caravana: "+d.caravana+" - Raza: "+d.raza_nombre+" - Carimbo: "+d.carimbo).ariaLabel("Eliminar Animal").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(f).then(function(){e["delete"]({id:d.id},d,function(c){a.getLotes();var e=b("filter")(a.animales.results,function(a){return a.id.toString()===d.id.toString()})[0];a.animales.results.shift(e)})},function(){console.log("Cancelaste")})},a.deleteListaAnimal=function(b){c.show({templateUrl:"views/dialogs/dialogo_eliminar.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","$filter",function(a,c,d,e){a.lista=b,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(a){"guardar"===a?b.length>=1&&angular.forEach(b,function(a){d["delete"]({id:a.id},a,function(a){console.log("eliminado: "+a.caravana),c.hide(b)})}):c.hide(b)}}]}).then(function(b){b!==!0&&(a.getAnimales(),a.getLotes())},function(){a.alert="You cancelled the dialog."})},a.mudarAnimales=function(d){c.show({templateUrl:"views/dialogs/dialogo_mudar.html",targetEvent:null,controller:["$scope","$mdDialog","Lote","Animal","$filter",function(a,b,c,e,f){a.lotes=[],a.lotes=c.get({establecimiento:n.establecimiento.id},function(b){a.lotes=b.results}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d.length>=1&&(angular.forEach(d,function(b){b.lote=a.form.lote,e.update({id:b.id},b,function(a){console.log(a)});var c=f("filter")(a.lotes,function(b){return b.id.toString()===a.form.lote.toString()})[0];b.lote_nombre=c.nombre}),b.hide(d))}}]}).then(function(c){c!==!0&&(a.getLotes(),angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)}))},function(){a.alert="You cancelled the dialog."})},a.recategorizar=function(d){c.show({templateUrl:"views/dialogs/dialogo_recategorizar.html",targetEvent:null,controller:["$scope","$mdDialog","Categoria","Animal","$filter",function(a,b,c,e,f){a.categorias=[],a.categorias=c.get(function(b){a.categorias=b.results}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d.length>=1&&(angular.forEach(d,function(b){b.categoria=a.form.categoria,e.update({id:b.id},b,function(a){console.log(a)});var c=a.form.categoria,d=f("filter")(a.categorias,function(a){return a.id.toString()===c.toString()})[0];b.categoria_nombre=d.nombre}),b.hide(d))}}]}).then(function(c){c!==!0&&angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)})},function(){a.alert="You cancelled the dialog."})},a.agruparEnLote=function(d){c.show({templateUrl:"views/dialogs/dialogo_lote.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData",function(a,b,c,g){a.potreros=[],a.potreros=c.get({establecimiento:g.establecimiento.id,lote:""},function(b){a.potreros=b.results}),a.newLote={},a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=g.establecimiento.id,a.newLote.animales=[],a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c){var g=new f(a.newLote);g.$save(function(a){d.length>=1&&(angular.forEach(d,function(a){a.lote=g.id,e.update({id:a.id},a,function(a){console.log(a)}),a.lote_nombre=g.nombre}),b.hide(d))},function(a){console.log(a)}),b.hide(d)}}}]}).then(function(c){c!==!0&&(a.getLotes(),angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)}))},function(){a.alert="You cancelled the dialog."})},a.mortandad=function(b){c.show({templateUrl:"views/dialogs/dialogo_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Mortandad","ServerData",function(a,c,d,e,f){a.newMortandad={},a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(d){if("guardar"===d&&b.length>=1){var g=[];angular.forEach(b,function(a){g.push(a.id)});var h=new e(a.form);h.establecimiento=f.establecimiento.id,h.animales=g,h.$save(function(a){console.log(a)},function(a){console.log(a)}),c.hide(b)}}}]}).then(function(b){b!==!0&&a.getAnimales()},function(){a.alert="You cancelled the dialog."})},a.queryLotes={establecimiento:g.establecimiento.id,ordering:"id",page:1},a.selectedLotes=[],a.getLotes=function(){a.promiseLotes=f.get(a.queryLotes,m).$promise,a.selectedLotes=[]},a.getLotes(),a.deleteLote=function(b){var d=c.confirm().title("Estas seguro de que quieres eliminar?").content("Lote: "+b.nombre+" - Potrero: "+b.potrero_nombre+" - Cantidad de animales: "+b.animales.length).ariaLabel("Lucky day").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(d).then(function(){f["delete"]({id:b.id},b,function(a){console.log(a),console.log(g),g.establecimiento=k.get({id:g.establecimiento.id}),console.log(g)}),a.lotes.results.splice(a.lotes.results.indexOf(b),1),a.selectedLotes=[]},function(){a.status="Se eliminó correctamente."})},a.editLote=function(d){c.show({templateUrl:"views/dialogs/dialogo_lote.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData","Establecimiento",function(a,b,c,e,g){a.potreros=[],a.potreros=c.get({establecimiento:e.establecimiento.id,lote:""},function(b){a.potreros=b.results}),a.newLote={},d?a.newLote=d:(a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=n.establecimiento.id,a.newLote.animales=[]),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c)if(d)f.update({id:a.newLote.id},a.newLote,function(c){a.newLote=c,b.hide(a.newLote)});else{var h=new f(a.newLote);h.$save(function(){console.log(e),e.establecimiento=g.get({id:e.establecimiento.id}),console.log(e)},function(a){console.log(a)}),b.hide(h)}}}]}).then(function(c){if(c!==!0){var d=b("filter")(a.lotes.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id?angular.extend(d,c):a.lotes.results.unshift(c)}},function(){a.alert="You cancelled the dialog."})},a.editMortandad=function(b){c.show({templateUrl:"views/dialogs/dialogo_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Mortandad",function(a,c,d,e){a.hola="hola",a.form={},b&&(a.form=b,a.form.fecha=new Date(b.fecha),console.log(a.form)),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(d){"guardar"===d&&b&&e.update({id:a.form.id},a.form,function(b){a.form=b,c.hide(a.form)})}}]}).then(function(a){console.log(a)},function(){a.alert="You cancelled the dialog."})};var o=XLSX;a.archivo={},a.cargarArchivo=function(b){c.show({templateUrl:"views/dialogs/dialogo_archivo.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","ServerData",function(a,c,d,e){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.archivo=b;var f={1:"Toro",2:"Vaca",3:"Desmamante",4:"Ternero"},g={1:"Brahman",2:"Angus",3:"Brangus",4:"Nelore"},h=function(a,b,c){return b===c?a:(a.hasOwnProperty(b)&&(a[c]=a[b],delete a[b]),a)};angular.forEach(a.archivo,function(a){a=h(a,"N° de Caravana","caravana"),a=h(a,"Código de Raza","raza"),a=h(a,"Código de Categoría","categoria"),a=h(a,"Carimbo","carimbo"),a=h(a,"N° de Caravana de la Madre","caravana_madre"),a=h(a,"Código de Lote","lote"),a=h(a,"Estado sanitario","estado_sanitario"),a.estado="V",a.establecimiento=e.establecimiento.id,"En fecha"===a.estado_sanitario.toString()?(a.estado_sanitario="E",a.estado_sanitario_display="En fecha"):"No esta en fecha"===a.estado_sanitario.toString()?(a.estado_sanitario="N",a.estado_sanitario_display="No esta en fecha"):"Desconocido"===a.estado_sanitario.toString()?(a.estado_sanitario="D",a.estado_sanitario_display="Desconocido"):(a.estado_sanitario="E",a.estado_sanitario_display="En fecha"),a.raza_nombre=g[a.raza],a.categoria_nombre=f[a.categoria]}),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(b){"guardar"===b&&(angular.forEach(a.archivo,function(a){var b=new d(a);console.log(b),b.$save(function(){},function(a){console.log(a)})}),c.hide())}}]}).then(function(){a.getAnimales()},function(){a.alert="You cancelled the dialog."})};var p=function(b){var c={},d=o.utils.sheet_to_row_object_array(b.Sheets[b.SheetNames[0]]);d.length>0&&(c=d),a.cargarArchivo(c),a.model={}};a.handleFile=function(a){console.log(a);var b,c,d=[a.file];for(b=0,c=d[b];b!==d.length;++b){var e=new FileReader;c.name;e.onload=function(a){var b=a.target.result,c=o.read(b,{type:"binary"});console.log("ok"),p(c)},e.readAsBinaryString(c)}}}]),angular.module("frontendmuApp").service("venta",function(){}),angular.module("frontendmuApp").run(["$templateCache",function(a){"use strict";a.put("views/about.html","<p>Bellbird</p>"),a.put("views/categoria.html",'<section> <div> <h1 class="md-display-1 green-text">Establecimiento</h1> </div> </section> <section> <div layout-padding> <h2 class="md-headline green-text">Categorias</h2> </div> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedCat.length"> <div class="md-toolbar-tools"> <span>Categorías</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editCat()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedCat.length"> <div class="md-toolbar-tools"> <span>[[selectedCat.length]] [[selectedCat.length > 1 ? \'categorias seleccionadas\' : \'categoria seleccionada\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedCat.length == 1" ng-click="editCat(selectedCat[0])" aria-label="Editar Categoria"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedCat.length >= 1" ng-click="deleteCat(selectedCat)" aria-label="Delete Categoria"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select multiple ng-model="selectedCat" md-progress="promiseCat"> <thead md-head md-order="queryCat.ordering" md-on-reorder="getCat"> <tr md-row md-select-id="id"> <th md-column md-order-by="id"><span>Código</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-order-by="is_hembra"><span>Sexo</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="cat" md-select-id="id" ng-disabled="!cat.establecimiento" md-auto-select ng-repeat="cat in categorias.results"> <td md-cell>[[cat.codigo]]</td> <td md-cell>[[cat.nombre]]</td> <td md-cell><span ng-show="cat.is_hembra">Hembra</span><span ng-hide="cat.is_hembra">Macho</span></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryCat.page" md-total="[[categorias.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getCat" md-page-select></md-table-pagination> </md-card> </section>'),a.put("views/compra.html",'<!--Section Compras --> <section> <md-card> <!-- Toolbar principal--> <md-toolbar class="green"> <div class="md-toolbar-tools white-text"> <div class="md-title">Compra</div> </div> </md-toolbar> <md-content> <!--Aca va ir el listado--> <md-card> <!-- Toolbar del listado--> <md-toolbar class="md-table-toolbar md-default" ng-hide="searchState"> <div class="md-toolbar-tools"> <span>Listado de compras</span> <span flex></span> <md-button class="md-icon-button" ng-click="search()"> <md-icon class="material-icons">search</md-icon> </md-button> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" ng-click="$mdOpenMenu($event)"> <md-icon>more_vert</md-icon> </md-button> <md-menu-content> <md-menu-item> <md-button ng-click="abrirFormCarga()"> <p>Agregar compra</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <!-- Toolbar de seleccion --> <md-toolbar class="md-table-toolbar alternate" ng-show="seleccion"> </md-toolbar> <!-- Toolbar del buscador --> <md-toolbar class="md-table-toolbar md-default" ng-show="searchState"> <div class="md-toolbar-tools"> <md-icon class="material-icons">search</md-icon> <md-input-container flex> <input ng-model="searchCompra"> </md-input-container> <md-button class="md-icon-button"> <md-icon class="material-icons">close</md-icon> </md-button> </div> </md-toolbar> <!-- Seccion de la tabla --> <md-table-container> <table md-table md-row-select multiple ng-model="seleccionCompra" md-progress="promise"> <thead md-head md-order="query.order" md-on-reorder="updateListadoCompras"> <tr md-row> <th md-column>Codigo de establecimiento vendedor</th> <th md-column>Nombre de establecimiento vendedor</th> <th md-column>Fecha</th> </tr> </thead> <tbody md-body> <tr md-row md-select="compra" md-select-id="id" md-auto-select ng-repeat="compra in compras | filter: searchCompra" ng-right-click="prueba($event)"> <td md-cell>[[compra.cod_establecimiento_vendedor]]</td> <td md-cell>[[compra.nombre_vendedor]]</td> <td md-cell>[[compra.fecha_compra]]</td> </tr> <tr> <td md-cell colspan="4" ng-hide="comprasCargadas"><p style="text-align: center" flex>No hay compras cargadas</p></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-limit-options="[5, 10, 15]" md-page="query.page" md-total="[[compras.count]]" md-on-paginate="updateListadoCompras" md-page-select></md-table-pagination> </md-card> </md-content> </md-card> </section>'),a.put("views/dashboard.html",'<h1 class="md-display-1 green-text">Dashboard</h1> <section> <md-card> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Calendario General</h2> </div> </md-toolbar> <md-content> <br> <div id="calendar" style="cursor:pointer"></div> </md-content> </md-card> </section>'),a.put("views/dialogs/dialogo_animal.html",'<md-dialog layout="column" aria-label="Cliente" style="min-width: 800px; min-height: 600px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Animal</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <md-content layout-padding> <form ng-show="razas.length >= 1 && categorias.length >= 1"> <md-input-container class="md-accent-1 md-block"> <label>Caravana</label> <input ng-model="newAnimal.caravana"> </md-input-container> <md-input-container class="md-block"> <label>Categoria</label> <md-select ng-model="newAnimal.categoria"> <md-option ng-repeat="cat in categorias" value="[[cat.id]]"> [[cat.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label>Carimbo</label> <input ng-model="newAnimal.carimbo" type="number"> </md-input-container> <md-input-container class="md-block"> <label>Raza</label> <md-select ng-model="newAnimal.raza"> <md-option ng-repeat="raza in razas" value="[[raza.id]]"> [[raza.nombre]] </md-option> </md-select></md-input-container> <md-input-container class="md-block"> <label>Estado Sanitario</label> <md-select ng-model="newAnimal.estado_sanitario"> <md-option value="E"> En fecha </md-option> <md-option value="N"> No esta en fecha </md-option> <md-option value="D"> Desconocido </md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label>Lote</label> <md-select ng-model="newAnimal.lote" aria-label="Lote"> <md-option value=""> No asignar </md-option> <md-option ng-repeat="lote in lotes" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label>Peso</label> <input ng-model="newAnimal.peso_especifico" type="number"> </md-input-container> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="razas.length >= 1 && categorias.length >= 1" layout-align="space-around"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-content> </md-dialog>'),a.put("views/dialogs/dialogo_archivo.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Archivo</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <div layout="column" layout-padding> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Animales</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column><span>Caravana</span></th> <th md-column><span>Categoria</span></th> <th md-column>Carimbo</th> <th md-column>Raza</th> <th md-column>Peso Específico (Kg.)</th> <th md-column>Estado Sanitario</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="animal in archivo | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell md-numeric>[[animal.caravana]]</td> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell md-numeric>[[animal.carimbo]]</td> <td md-cell>[[animal.raza_nombre]]</td> <td md-cell md-numeric>[[animal.peso_especifico]]</td> <td md-cell>[[animal.estado_sanitario_display]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[archivo.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </div> </md-dialog>'),a.put("views/dialogs/dialogo_carga_animales.html",'<md-dialog style="min-width: 1200px; width: 1200px"> <md-toolbar> <div class="md-toolbar-tools white-text"> <h2>Carga de Animales</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons white-text">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <md-tabs md-dynamic-height md-border-bottom> <md-tab label="Paso 1"> <md-content class="md-padding" layout="column" layout-align="center center"> <br><br> <h3>1er paso. Descarga nuestra plantilla <small class="grey-text">(puede saltarse este paso si ya cuenta con la plantilla)</small> </h3> <div layout="row" layout-align="center center"> <md-button ng-click="generarPlantilla()"><md-icon><i class="material-icons">file_download</i> </md-icon>Descargar</md-button> </div> <br><br> </md-content> </md-tab> <md-tab label="Paso 2"> <md-content class="md-padding" layout="column" layout-align="center center"> <br><br> <h3>2do paso. Descarge sus configuraciones <small class="grey-text">(puede saltarse este paso si ya cuenta con sus configuraciones mas actualizadas)</small> </h3> <div layout="row" layout-align="center center"> <md-button ng-click="crearExcel()"><md-icon><i class="material-icons">file_download</i> </md-icon>Descargar</md-button> <md-button ng-click="crearExcel()"><md-icon><i class="material-icons">file_download</i> </md-icon>Descargar2</md-button> </div> <br><br> </md-content> </md-tab> <md-tab label="Paso 3"> <md-content class="md-padding" layout="column" layout-align="center center"> <br><br> <h3>3er paso. Cargue la plantilla descargada anteriormente con los datos de sus animales y de sus configuraciones, luego suba el archivo</h3> <div layout="row" layout-align="center center"> <md-button> <label for="file"> <md-icon><i class="material-icons">file_upload</i> </md-icon>Subir archivo </label> </md-button> <md-button ng-show="!error.length && cargado" class="md-primary md-raised white-text" ng-click="guardarAnimales()"> <md-icon><i class="material-icons white-text">save</i> </md-icon>Guardar animales </md-button> <input id="file" type="file" ng-model-instant onchange="angular.element(this).scope().setFiles(this)" hidden> </div> <div layout="column" layout-padding> <div ng-show="error.length"> <p class="red-text">Su archivo no se pudo cargar porque contiene estos errores: </p> <p class="red-text" ng-repeat="error in error"> [[error]] </p> </div> <md-card ng-show="cargado"> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Animales</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>Lote</th> <th md-column><span>Caravana</span></th> <th md-column><span>Categoria</span></th> <th md-column>Carimbo</th> <th md-column>Raza</th> <th md-column>Peso Específico (Kg.)</th> <th md-column>Estado Sanitario</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="animal in archivo | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell ng-class="{\'red-text\': animal.error}">[[animal.lote_nombre]]</td> <td md-cell md-numeric ng-class="{\'red-text\': animal.error}">[[animal.caravana]]</td> <td md-cell ng-class="{\'red-text\': animal.error}">[[animal.categoria_nombre]]</td> <td md-cell md-numeric ng-class="{\'red-text\': animal.error}">[[animal.carimbo]]</td> <td md-cell ng-class="{\'red-text\': animal.error}">[[animal.raza_nombre]]</td> <td md-cell md-numeric ng-class="{\'red-text\': animal.error}">[[animal.peso_especifico]]</td> <td md-cell ng-class="{\'red-text\': animal.error}">[[animal.estado_sanitario_display]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[archivo.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> <br><br> </md-content> </md-tab> </md-tabs> </md-dialog-content> <md-dialog-actions layout="row" ng-show="paso == -1"> <span flex></span> <md-button ng-click="cancel()"> Cancelar </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Siguiente </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/dialogs/dialogo_categoria.html",'<md-dialog layout="column" aria-label="Categoria" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Categoría</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Nombre</label> <input ng-model="newCategoria.nombre" required> </md-input-container> <md-input-container> <md-switch ng-model="newCategoria.is_hembra" aria-label="Es hembra"> Es hembra? : <span ng-show="newCategoria.is_hembra">Sí</span><span ng-hide="newCategoria.is_hembra">No</span> </md-switch> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_contratista.html",'<md-dialog layout="column" aria-label="Categoria" style="min-width: 1000px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Contratista</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Nombre</label> <input ng-model="newContratista.nombre" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Apellido</label> <input ng-model="newContratista.apellido" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Cedula de Identidad Nº.</label> <input ng-model="newContratista.numero_cedula" required> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Fecha de Nacimiento</label> <input type="date" ng-model="newContratista.fecha_nacimiento" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Teléfono</label> <input ng-model="newContratista.telefono" required> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Actividad</label> <input ng-model="newContratista.actividad" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Jornal</label> <input ng-model="newContratista.jornal" required> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("views/dialogs/dialogo_crear_compra.html",'<md-dialog layout="column" aria-label="Compra" style="min-width: 100%; min-height: 100%"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Compra Animal</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"> <md-icon class="md-icon-button white-text"><i class="material-icons">close</i></md-icon> </md-button> </div> </md-toolbar> <!-- Card Encabezado --> <md-card> <md-content layout-padding> <h4 class="green-text">Encabezado</h4> <div layout="row"> <md-input-container class="md-accent-1 md-block" flex> <label>Codigo de establecimiento del vendedor</label> <input ng-model="newCompra.cod_establecimiento_vendedor"> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Nombre del vendedor</label> <input ng-model="newCompra.nombre_vendedor"> </md-input-container> <md-input-container> <label>Numero de Guia</label> <input ng-model="newCompra.numero_guia" type="number"> </md-input-container> <md-datepicker ng-model="fecha_compra" style="margin:13px 0" md-placeholder="Fecha de compra"></md-datepicker> <md-input-container class="md-accent-1 md-block" flex> <label>Precio</label> <input type="number" ng-model="newCompra.precio_total"> </md-input-container> </div> </md-content> </md-card> <md-card> <!-- Este es el formulario de carga de detalles --> <md-content layout-padding> <h4 class="green-text">Detalles</h4> <div layout="row"> <md-input-container class="md-accent-1 md-block" flex> <label>Categoria</label> <md-select ng-model="newDetalle.categoria"> <md-option ng-repeat="categoria in categorias" value="[[categoria.id]]"> [[categoria.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Carimbo</label> <md-select ng-model="newDetalle.carimbo"> <md-option value="0">0</md-option> <md-option value="1">1</md-option> <md-option value="2">2</md-option> <md-option value="3">3</md-option> <md-option value="4">4</md-option> <md-option value="5">5</md-option> <md-option value="6">6</md-option> <md-option value="7">7</md-option> <md-option value="8">8</md-option> <md-option value="9">9</md-option> </md-select> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Raza</label> <md-select ng-model="newDetalle.raza"> <md-option ng-repeat="raza in razas" value="[[raza.id]]"> [[raza.nombre]] </md-option> </md-select> </md-input-container> </div> <div layout="row"> <md-input-container class="md-accent-1 md-block" flex> <label>Cantidad</label> <input type="number" ng-model="newDetalle.cantidad"> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Nro de caravana inicial</label> <input type="number" ng-model="newDetalle.nro_caravana_inicial"> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Lote</label> <md-select ng-model="newDetalle.lote"> <md-option value=""> No asignar </md-option> <md-option ng-repeat="lote in lotes" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> <md-button class="md-icon-button" ng-click="cargarDetalleCompra(newDetalle)"> <md-icon><i class="material-icons">add</i></md-icon> </md-button> </div> </md-content> <!-- Este seria el listado de detalles de compra --> <md-content> <md-table-container> <table md-table md-row-select multiple ng-model="seleccionDetalleCompra" md-progress="promise"> <thead md-head md-order="" md-on-reorder=""> <tr md-row> <th md-column>Categoria</th> <th md-column>Carimbo</th> <th md-column>Raza</th> <th md-column>Cantidad</th> <th md-column>Caravanas</th> </tr> </thead> <tbody md-body> <tr md-row md-select="detalle_compra" md-select-id="id" md-auto-select ng-repeat="detalle_compra in newCompra.detalle_compra"> <td md-cell>[[detalle_compra.categoria]]</td> <td md-cell>[[detalle_compra.carimbo]]</td> <td md-cell>[[detalle_compra.raza]]</td> <td md-cell>[[detalle_compra.cantidad]]</td> <td md-cell>[[detalle_compra.caravana_inicial]] a [[detalle_compra.caravana_inicial + detalle_compra.cantidad]] </td> </tr> <tr> <td md-cell colspan="6" ng-show="newCompra.detalle_compra.length == 0"><p style="text-align: center" flex> No hay detalles de compras cargados</p></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-limit-options="[5, 10, 15]" md-page="query.page" md-total="[[compras.count]]" md-on-paginate="updateListadoCompras" md-page-select></md-table-pagination> </md-content> </md-card> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="guardarCompra(newCompra)" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> [[newCompra]] </md-dialog>'),a.put("views/dialogs/dialogo_eliminar.html",'<md-dialog aria-label="Animales" ng-cloak> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Animales</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Animales</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column><span>Caravana</span></th> <th md-column><span>Categoria</span></th> <th md-column>Carimbo</th> <th md-column>Raza</th> <th md-column>Peso Específico (Kg.)</th> <th md-column>Estado Sanitario</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="animal in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell md-numeric>[[animal.caravana]]</td> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell md-numeric>[[animal.carimbo]]</td> <td md-cell>[[animal.raza_nombre]]</td> <td md-cell md-numeric>[[animal.peso_especifico]]</td> <td md-cell>[[animal.estado_sanitario_display]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[archivo.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_eliminar_animal.html",'<md-dialog aria-label="Animales" ng-cloak> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Animales</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Animales</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column><span>Caravana</span></th> <th md-column><span>Categoria</span></th> <th md-column>Carimbo</th> <th md-column>Raza</th> <th md-column>Peso Específico (Kg.)</th> <th md-column>Estado Sanitario</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="animal in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell md-numeric>[[animal.caravana]]</td> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell md-numeric>[[animal.carimbo]]</td> <td md-cell>[[animal.raza_nombre]]</td> <td md-cell md-numeric>[[animal.peso_especifico]]</td> <td md-cell>[[animal.estado_sanitario_display]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[archivo.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_eliminar_categoria.html",'<md-dialog aria-label="Mortandad" style="min-width: 800px; width: 800px"> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Categoría</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Categoría</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>Nombre</th> <th md-column>Sexo</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="cat in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell>[[cat.nombre]]</td> <td md-cell><span ng-show="cat.is_hembra">Hembra</span><span ng-hide="cat.is_hembra">Macho</span></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[lista.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_eliminar_contratista.html",'<md-dialog aria-label="Mortandad" style="min-width: 800px; width: 800px"> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Contratista</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Contratista</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column md-order-by="apellido"><span>Apellido</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-numeric md-order-by="numero_cedula"><span>CI Nº.</span></th> <th md-column><span>Teléfono</span></th> <!--\n                    <th md-column md-order-by="fecha_nacimiento"><span>Fecha Nac.</span></th>\n                    <th md-column md-order-by="direccion"><span>Dirección</span></th>\n\n                    <th md-column md-order-by="ingreso_empresa"><span>Ingreso</span></th>\n                    <th md-column md-order-by="ciudad_nacimiento"><span>Ciudad Nac.</span></th>\n                    --> <th md-column md-order-by="actividad"><span>Actividad</span></th> <th md-column md-numeric md-order-by="jornal"><span>Jornal</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="con in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell>[[con.apellido]]</td> <td md-cell>[[con.nombre]]</td> <td md-cell>[[con.numero_cedula | number]]</td> <td md-cell>[[con.telefono]]</td> <!--\n                    <td md-cell>[[emp.fecha_nacimiento | date:\'dd/MM/yyyy\']]</td>\n                    <td md-cell>[[emp.direccion]]</td>\n\n                    <td md-cell>[[emp.ingreso_empresa | date:\'dd/MM/yyyy\']]</td>\n                    <td md-cell>[[emp.ciudad_nacimiento]]</td>\n                    --><td md-cell>[[con.actividad]]</td> <td md-cell>[[con.jornal | number]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[lista.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_eliminar_empleado.html",'<md-dialog aria-label="Mortandad" style="min-width: 800px; width: 800px"> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Empleado</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Empleado</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column md-order-by="apellido"><span>Apellido</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-numeric md-order-by="numero_cedula"><span>CI Nº.</span></th> <th md-column><span>Teléfono</span></th> <!--\n                    <th md-column md-order-by="fecha_nacimiento"><span>Fecha Nac.</span></th>\n                    <th md-column md-order-by="direccion"><span>Dirección</span></th>\n\n                    <th md-column md-order-by="ingreso_empresa"><span>Ingreso</span></th>\n                    <th md-column md-order-by="ciudad_nacimiento"><span>Ciudad Nac.</span></th>\n                    --> <th md-column md-order-by="cargo"><span>Cargo</span></th> <th md-column md-numeric md-order-by="salario"><span>Salario</span></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="emp in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell>[[emp.apellido]]</td> <td md-cell>[[emp.nombre]]</td> <td md-cell>[[emp.numero_cedula | number]]</td> <td md-cell>[[emp.telefono]]</td> <!--\n                    <td md-cell>[[emp.fecha_nacimiento | date:\'dd/MM/yyyy\']]</td>\n                    <td md-cell>[[emp.direccion]]</td>\n\n                    <td md-cell>[[emp.ingreso_empresa | date:\'dd/MM/yyyy\']]</td>\n                    <td md-cell>[[emp.ciudad_nacimiento]]</td>\n                    --><td md-cell>[[emp.cargo]]</td> <td md-cell>[[emp.salario | number]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[lista.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_eliminar_mortandad.html",'<md-dialog aria-label="Mortandad" style="min-width: 800px; width: 800px"> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Mortandad</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Mortandad</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>Fecha</th> <th md-column><span>Tipo</span></th> <th md-column>Razón</th> <th md-column md-numeric>Cantidad de Animales</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="mortandad in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell>[[mortandad.fecha | date:\'dd/MM/yyyy\']]</td> <td md-cell>[[mortandad.tipo_display]]</td> <td md-cell>[[mortandad.razon]]</td> <td md-cell>[[mortandad.animales.length]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[lista.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_eliminar_raza.html",'<md-dialog aria-label="Mortandad" style="min-width: 800px; width: 800px"> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Raza</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Raza</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>Nombre</th> <th md-column>Descripción</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="raza in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell>[[raza.nombre]]</td> <td md-cell>[[raza.descripcion]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[lista.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_eliminar_registro.html",'<md-dialog aria-label="Mortandad" style="min-width: 800px; width: 800px"> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Registro</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Registro</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>Fecha</th> <th md-column>Cantidad (mm3)</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="reg in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell>[[reg.fecha]]</td> <td md-cell>[[reg.cantidad]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[lista.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_empleado.html",'<md-dialog layout="column" aria-label="Categoria" style="min-width: 1000px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Empleado</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form enctype="multipart/form-data"> <md-dialog-content layout-padding> <div layout="column"> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Nombre</label> <input ng-model="newEmpleado.nombre" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Apellido</label> <input ng-model="newEmpleado.apellido" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Cedula de Identidad Nº.</label> <input ng-model="newEmpleado.numero_cedula" required> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Fecha de Nacimiento</label> <input type="date" ng-model="newEmpleado.fecha_nacimiento" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Ciudad de Nacimiento</label> <input ng-model="newEmpleado.ciudad_nacimiento"> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Teléfono</label> <input ng-model="newEmpleado.telefono" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Mail</label> <input ng-model="newEmpleado.mail" type="email"> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Contacto de emergencia</label> <input ng-model="newEmpleado.contacto_emergencia"> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Dirección</label> <input ng-model="newEmpleado.direccion" required> </md-input-container> </div> <div layout-gt-sm="row"> <md-input-container class="md-block" flex-gt-sm> <label>Ingreso a la empresa</label> <input type="date" ng-model="newEmpleado.ingreso_empresa" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Cargo</label> <input ng-model="newEmpleado.cargo" required> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <label>Salario</label> <input ng-model="newEmpleado.salario" required> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_evento.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Sanitación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Descripción</label> <input type="text" ng-model="newEvento.nombre" required> </md-input-container> <md-input-container> <label>Veterinario</label> <input type="text" ng-model="newEvento.veterinario" required> </md-input-container> <md-input-container ng-hide="newEvento.start && !newEvento.id"> <label>Fecha de Inicio</label> <input type="date" ng-model="newEvento.start" required> </md-input-container> <md-input-container ng-hide="newEvento.end && !newEvento.id"> <label>Fecha de Fin</label> <input type="date" ng-model="newEvento.end" required> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button ng-show="newEvento.id" ng-click="deleteEvento(newEvento)" class="red-text">Eliminar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> <md-button ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_inseminacion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Inseminación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form ng-show="pajuelas.length >= 1"> <md-dialog-content> <div> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha" required> </md-input-container> <md-input-container> <label>Pajuela</label> <md-select ng-model="form.pajuela"> <md-option ng-repeat="pajuela in pajuelas" value="[[pajuela.id]]"> [[pajuela.nombre]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </div> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="pajuelas.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_lote.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Lote</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form layout="column" layout-padding ng-show="potreros.length >= 1"> <md-input-container> <label>Nombre</label> <input ng-model="newLote.nombre"> </md-input-container> <md-input-container> <label>Potrero</label> <md-select ng-model="newLote.potrero"> <md-option ng-repeat="potrero in potreros" value="[[potrero.id]]"> [[potrero.nombre]] </md-option> </md-select> </md-input-container> <md-input-container> <label>Peso Promedio</label> <input ng-model="newLote.peso_promedio"> </md-input-container> <md-input-container> <label>Cantidad</label> <input ng-model="newLote.animales.length" disabled> </md-input-container> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="potreros.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_meteorologia.html",'<md-dialog layout="column" aria-label="Categoria" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Registro</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="row"> <md-input-container> <label>Fecha</label> <input type="date" ng-model="newRegistro.fecha" required> </md-input-container> <md-input-container> <label>Cantidad (mm3)</label> <input ng-model="newRegistro.cantidad" required> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_mortandad.html",'<md-dialog layout="column" aria-label="Mortandad" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Mortandad/Abigeo</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha"> </md-input-container> <md-input-container> <label>Tipo</label> <md-select ng-model="form.tipo"> <md-option value="M"> Mortandad </md-option> <md-option value="A"> Abigeo </md-option> </md-select> </md-input-container> <md-input-container> <label>Descripción</label> <input ng-model="form.razon"> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_mudar.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Mudar a Lote existente</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <form layout="column" ng-show="lotes.length >= 1"> <md-input-container class="block"> <label>Lote</label> <md-select ng-model="form.lote"> <md-option ng-repeat="lote in lotes" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> </form> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="lotes.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_mudar_animal.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Mudar a Lote existente</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <form layout="column" ng-show="lotes.length >= 1"> <md-input-container class="block"> <label>Lote</label> <md-select ng-model="form.lote"> <md-option ng-repeat="lote in lotes" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> </form> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="lotes.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_nutricion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Nutrición</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Tipo</label> <md-select ng-model="newNutricion.tipo_nutricion"> <md-option value="Cría"> Cría </md-option> <md-option value="Engorde"> Engorde </md-option> </md-select> </md-input-container> <md-input-container> <label>Tipo de Alimento</label> <md-select ng-model="newNutricion.tipo_comida"> <md-option ng-repeat="alimento in alimentos" value="[[alimento]]"> [[alimento]] </md-option> </md-select> </md-input-container> <md-input-container ng-show="newNutricion.tipo_comida == \'Otros\'"> <label>Tipo de Alimento (Otro)</label> <input ng-model="form.tipo_comida" required> </md-input-container> <md-input-container> <label>Descripcion de Alimento</label> <input ng-model="newNutricion.descripcion_comida"> </md-input-container> <md-input-container> <label>Fecha de Inicio</label> <input type="date" ng-model="newNutricion.fecha_inicio" required> </md-input-container> <md-input-container> <label>Fecha de Fin</label> <input type="date" ng-model="newNutricion.fecha_fin" required> </md-input-container> <div layout="row" ng-show="newNutricion.fecha_inicio && newNutricion.fecha_fin"> <md-input-container flex> <label>Gramos por Día (p/cabeza)</label> <input ng-model="form.gramos" required ng-change="calculo_kilos(form.gramos)"> </md-input-container> <md-input-container flex> <label>Total kilos (p/cabeza)</label> <input ng-model="form.kilos" required ng-change="calculo_kilos(form.kilos)"> </md-input-container> </div> <md-input-container> <label>Lotes</label> <md-select multiple ng-model="newNutricion.lotes"> <md-option ng-repeat="lote in lotes" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),
a.put("views/dialogs/dialogo_potrero.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Potrero</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Nombre</label> <input ng-model="newPotrero.nombre" required> </md-input-container> <md-input-container> <label>Superficie (Ha.)</label> <input ng-model="newPotrero.superficie"> </md-input-container> <md-input-container> <label>Uso</label> <input ng-model="newPotrero.uso"> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_raza.html",'<md-dialog layout="column" aria-label="Raza" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Raza</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Nombre</label> <input ng-model="newRaza.nombre" required> </md-input-container> <md-input-container> <label>Descripción</label> <input ng-model="newRaza.descripcion"> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_recategorizar.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Recategorizar</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form ng-show="categorias.length >= 1"> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Categoria</label> <md-select ng-model="form.categoria"> <md-option ng-repeat="categoria in categorias" value="[[categoria.id]]"> [[categoria.nombre]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="categorias.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_recategorizar_animal.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Recategorizar</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form ng-show="categorias.length >= 1"> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Categoria</label> <md-select ng-model="form.categoria"> <md-option ng-repeat="categoria in categorias" value="[[categoria.id]]"> [[categoria.nombre]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="categorias.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_vacunacion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Inseminación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content> <div> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha" required> </md-input-container> <md-input-container> <label>Sanitacion</label> <md-select ng-model="form.sanitacion"> <md-option ng-repeat="sanitacion in sanitaciones" value="[[sanitacion.id]]"> [[sanitacion.title]] </md-option> </md-select> </md-input-container> <md-input-container> <label>Vacuna</label> <md-select ng-model="form.vacuna"> <md-option ng-repeat="vacuna in vacunas" value="[[vacuna.id]]"> [[vacuna.nombre]] - [[vacuna.nombre_cientifico]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </div> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="sanitaciones.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_view_mortandad.html",'<md-dialog aria-label="Mortandad" style="min-width: 800px; width: 800px"> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Mortandad/Abigeo</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Detalle</h2> <p>Fecha: [[mortandad.fecha | date:\'dd/MM/yyyy\']]</p> <p>Tipo: [[mortandad.tipo_display]]</p> <p>Descripción: [[mortandad.razon]]</p> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Animales</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column>Categoria</th> <th md-column md-numeric>Carimbo</th> <th md-column md-numeric>Peso específico</th> <th md-column md-numeric>Caravana</th> <th md-column>Raza</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="animal in mortandad.animales_completo"> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell>[[animal.carimbo]]</td> <td md-cell>[[animal.peso_especifico]]</td> <td md-cell>[[animal.caravana]]</td> <td md-cell>[[animal.raza_nombre]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-total="[[mortandad.animales_completo.length]]"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'ok\')" style="margin-right:20px"> OK. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/empleado.html",'<section> <div> <div class="md-display-1 green-text">Establecimiento <div class="md-headline grey-text">Empleados y Contratistas</div> </div> </div> </section> <section> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedEmp.length"> <div class="md-toolbar-tools"> <span>Empleados</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editEmp()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedEmp.length"> <div class="md-toolbar-tools"> <span>[[selectedEmp.length]] [[selectedEmp.length > 1 ? \'empleados seleccionados\' : \'empleado seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedEmp.length == 1" ng-click="verEmp(selectedEmp[0])" aria-label="Ver Empleado"> <md-icon><i class="material-icons green-text text-darken-4">visibility</i> </md-icon> </md-button> <md-button class="md-icon-button" ng-show="selectedEmp.length == 1" ng-click="editEmp(selectedEmp[0])" aria-label="Editar Empleado"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedEmp.length >= 1" ng-click="deleteEmp(selectedEmp)" aria-label="Delete Empleado"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select multiple ng-model="selectedEmp" md-progress="promiseEmp"> <thead md-head md-order="queryEmp.ordering" md-on-reorder="getEmp"> <tr md-row md-select-id="id"> <th md-column md-order-by="apellido"><span>Apellido</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-numeric md-order-by="numero_cedula"><span>CI Nº.</span></th> <th md-column><span>Teléfono</span></th> <!--\n                    <th md-column md-order-by="fecha_nacimiento"><span>Fecha Nac.</span></th>\n                    <th md-column md-order-by="direccion"><span>Dirección</span></th>\n\n                    <th md-column md-order-by="ingreso_empresa"><span>Ingreso</span></th>\n                    <th md-column md-order-by="ciudad_nacimiento"><span>Ciudad Nac.</span></th>\n                    --> <th md-column md-order-by="cargo"><span>Cargo</span></th> <th md-column md-numeric md-order-by="salario"><span>Salario</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="emp" md-select-id="id" md-auto-select ng-repeat="emp in empleados.results"> <td md-cell>[[emp.apellido]]</td> <td md-cell>[[emp.nombre]]</td> <td md-cell>[[emp.numero_cedula | number]]</td> <td md-cell>[[emp.telefono]]</td> <!--\n                    <td md-cell>[[emp.fecha_nacimiento | date:\'dd/MM/yyyy\']]</td>\n                    <td md-cell>[[emp.direccion]]</td>\n\n                    <td md-cell>[[emp.ingreso_empresa | date:\'dd/MM/yyyy\']]</td>\n                    <td md-cell>[[emp.ciudad_nacimiento]]</td>\n                    --><td md-cell>[[emp.cargo]]</td> <td md-cell>[[emp.salario | number]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryEmp.page" md-total="[[empleados.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getEmp" md-page-select></md-table-pagination> </md-card> </section> <!-- CONTRATISTA --> <section> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedCon.length"> <div class="md-toolbar-tools"> <span>Contratistas</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editCon()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedCon.length"> <div class="md-toolbar-tools"> <span>[[selectedCon.length]] [[selectedCon.length > 1 ? \'contratistas seleccionados\' : \'contratista seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedCon.length == 1" ng-click="editCon(selectedCon[0])" aria-label="Editar Contratista"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedCon.length >= 1" ng-click="deleteCon(selectedCon)" aria-label="Delete Empleado"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select multiple ng-model="selectedCon" md-progress="promiseCon"> <thead md-head md-order="queryCon.ordering" md-on-reorder="getCon"> <tr md-row md-select-id="id"> <th md-column md-order-by="apellido"><span>Apellido</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-numeric md-order-by="numero_cedula"><span>CI Nº.</span></th> <th md-column md-order-by="fecha_nacimiento"><span>Fecha Nac.</span></th> <th md-column><span>Teléfono</span></th> <!--\n                    <th md-column md-order-by="fecha_nacimiento"><span>Fecha Nac.</span></th>\n                    <th md-column md-order-by="direccion"><span>Dirección</span></th>\n\n                    <th md-column md-order-by="ingreso_empresa"><span>Ingreso</span></th>\n                    <th md-column md-order-by="ciudad_nacimiento"><span>Ciudad Nac.</span></th>\n                    --> <th md-column md-order-by="actividad"><span>Actividad</span></th> <th md-column md-numeric md-order-by="jornal"><span>Jornal</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="con" md-select-id="id" md-auto-select ng-repeat="con in contratistas.results"> <td md-cell>[[con.apellido]]</td> <td md-cell>[[con.nombre]]</td> <td md-cell>[[con.numero_cedula | number]]</td> <td md-cell>[[con.fecha_nacimiento | date:\'dd/MM/yyyy\']]</td> <td md-cell>[[con.telefono]]</td> <!--\n                    <td md-cell>[[emp.fecha_nacimiento | date:\'dd/MM/yyyy\']]</td>\n                    <td md-cell>[[emp.direccion]]</td>\n\n                    <td md-cell>[[emp.ingreso_empresa | date:\'dd/MM/yyyy\']]</td>\n                    <td md-cell>[[emp.ciudad_nacimiento]]</td>\n                    --><td md-cell>[[con.actividad]]</td> <td md-cell>[[con.jornal | number]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryCon.page" md-total="[[contratistas.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getCon" md-page-select></md-table-pagination> </md-card> </section>'),a.put("views/establecimiento.html",'<div layout-padding> <div class="md-display-1 green-text">Establecimiento <div class="md-headline grey-text">Configuración</div> </div> </div> <section layout-md="row" layout-sm="column" layout-gt-md="row"> <md-card flex-md flex-sm flex-gt-md="50"> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Ajustes</span> </div> </md-toolbar> <md-list> <md-divider></md-divider> <md-list-item ng-click="go(config.url)" ng-repeat="config in configuraciones"> <p> [[config.nombre]] </p> </md-list-item> <md-list-item ng-click="cargaAnimales()"> <p>Carga masiva de animales</p> </md-list-item> </md-list> </md-card> </section>'),a.put("views/inventario.html",'<div layout="column"> <div> <h1 class="md-display-1 green-text">Manejo</h1> </div> <!-- LOTES --> <section> <div layout-padding> <h2 class="md-headline green-text">Lotes</h2> </div> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedLotes.length"> <div class="md-toolbar-tools"> <span>Lotes</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editLote()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedLotes.length"> <div class="md-toolbar-tools"> <span>[[selectedLotes.length]] [[selectedLotes.length > 1 ? \'lotes seleccionados\' : \'lote seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedLotes.length == 1" ng-click="editLote(selectedLotes[0])" aria-label="Editar Lote"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedLotes[0].animales.length == 0" ng-click="deleteLote(selectedLotes[0])" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select ng-model="selectedLotes" md-progress="promiseLotes"> <thead md-head md-order="queryLotes.ordering" md-on-reorder="getLotes"> <tr md-row md-select-id="id"> <th md-column md-numeric md-order-by="id"><span>Código</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-order-by="potrero__nombre"><span>Potrero</span></th> <th md-column md-numeric md-order-by="peso_promedio">Peso promedio (Kg.)</th> <th md-column md-numeric md-order-by="cantidad">Cantidad</th> <th md-column>En servicio</th> <th md-column>Dietas Activas</th> </tr> </thead> <tbody md-body> <tr md-row md-select="lote" md-select-id="id" md-auto-select ng-repeat="lote in lotes.results"> <td md-cell>[[lote.id]]</td> <td md-cell>[[lote.nombre]]</td> <td md-cell>[[lote.potrero_nombre]]</td> <td md-cell>[[lote.peso_promedio]]</td> <td md-cell>[[lote.animales.length]]</td> <td md-cell>No</td> <td md-cell>Ninguna</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryLotes.page" md-total="[[lotes.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getLotes" md-page-select></md-table-pagination> </md-card> </section> <!-- ANIMALES --> <section ng-show="lotes.results.length"> <div layout-padding> <h2 class="md-headline green-text">Animales</h2> </div> <md-card layout-padding> <div layout="row"> <md-input-container class="md-block" flex> <label>Lote</label> <md-select ng-model="queryAnimales.lote" aria-label="Lote" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="lote in lotes.results" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Categoria</label> <md-select ng-model="queryAnimales.categoria" aria-label="Categoria" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="cat in categorias.results" value="[[cat.id]]"> [[cat.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Raza</label> <md-select ng-model="queryAnimales.raza" aria-label="Raza" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="raza in razas.results" value="[[raza.id]]"> [[raza.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Carimbo</label> <md-select ng-model="queryAnimales.carimbo" aria-label="Carimbo" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="carimbo in [0,1,2,3,4,5,6,7,8,9]" value="[[carimbo]]"> [[carimbo]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Estado Sanitario</label> <md-select ng-model="queryAnimales.estado_sanitario" aria-label="Estado Sanitario" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="estado in estados_sanitarios" value="[[estado.c]]"> [[estado.display]] </md-option> </md-select> </md-input-container> </div> </md-card> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedAnimales.length"> <div class="md-toolbar-tools"> <span>Animales</span> <span flex></span> <md-button> <label for="file"> <md-icon><i class="material-icons">file_upload</i> </md-icon>Importar </label> </md-button> <input id="file" type="file" ng-model="model.file" change="handleFile(model)" hidden> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-hide="selection.length"> <md-button ng-click="editAnimal()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedAnimales.length"> <div class="md-toolbar-tools"> <span>[[selectedAnimales.length]] [[selectedAnimales.length > 1 ? \'animales seleccionados\' : \'animal seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedAnimales.length == 1" ng-click="editAnimal(selectedAnimales[0])" aria-label="Editar Animal"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedAnimales.length == 1" ng-click="deleteAnimal(selectedAnimales[0])" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedAnimales.length > 1" ng-click="deleteListaAnimal(selectedAnimales)" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button green-text text-darken-4" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons green-text text-darken-4">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="agruparEnLote(selectedAnimales)"> <p>Agrupar en Lote nuevo</p> </md-button> </md-menu-item> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="mudarAnimales(selectedAnimales)"> <p>Mudar a Lote existente</p> </md-button> </md-menu-item> <md-divider ng-show="selectedAnimales.length"></md-divider> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="recategorizar(selectedAnimales)"> <p>Recategorizar</p> </md-button> </md-menu-item> <md-divider ng-show="selectedAnimales.length"></md-divider> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="mortandad(selectedAnimales)"> <p>Declarar Mortandad/Abigeo</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select multiple ng-model="selectedAnimales" md-progress="promiseAnimales"> <thead md-head md-order="queryAnimales.ordering" md-on-reorder="getAnimales"> <tr md-row md-select-id="id"> <th md-column md-order-by="lote__nombre">Lote</th> <th md-column md-order-by="categoria__nombre"><span>Categoria</span></th> <th md-column md-numeric md-order-by="carimbo">Carimbo</th> <th md-column md-numeric md-order-by="peso_especifico">Peso específico (Kg.)</th> <th md-column md-order-by="estado_sanitario">Estado Sanitario</th> <th md-column md-numeric md-order-by="caravana"><span>Caravana</span></th> <th md-column md-order-by="raza__nombre">Raza</th> </tr> </thead> <tbody md-body> <tr md-row md-select="animal" md-select-id="id" md-auto-select ng-repeat="animal in animales.results"> <td md-cell>[[animal.lote_nombre || \'No asignado\']]</td> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell>[[animal.carimbo]]</td> <td md-cell>[[animal.peso_especifico]]</td> <td md-cell>[[animal.estado_sanitario_display]]</td> <td md-cell>[[animal.caravana]]</td> <td md-cell>[[animal.raza_nombre]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="queryAnimales.limit" md-limit-options="[20, 50, 100]" md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-page="queryAnimales.page" md-total="[[animales.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getAnimales"></md-table-pagination> </md-card> </section> </div>'),a.put("views/login.html",'<div layout="row" layout-sm="row" layout-xs="column"> <div flex></div> <div flex id="login_view" layout-padding ng-controller="LoginCtrl"> <md-card> <img src="images/logo.1dab0356.jpg" class="md-card-image" alt="Washed Out"> <md-card-title> <md-card-title-text> <span class="md-headline">Login</span> </md-card-title-text> </md-card-title> <md-card-content> <form role="form" layout="column" ng-submit="login(loginForm)" name="loginForm"> <md-input-container> <label>Nombre de usuario</label> <input ng-model="model.username" type="text"> </md-input-container> <md-input-container> <label>Contraseña</label> <input ng-model="model.password" type="password"> </md-input-container> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" type="submit" class="md-primary">Ingresar</md-button> </div> <div class="red-text" ng-repeat="error in errors.password">[[error]]</div> <div class="red-text" ng-repeat="error in errors.non_field_errors">[[error]]</div> <div class="red-text" ng-if="error">[[error]]</div> </form> </md-card-content> </md-card> </div> <div flex></div> </div>'),a.put("views/logout.html","<p>This is the logout view.</p>"),a.put("views/main.html",'<div layout="row"> <md-card flex="20" ng-repeat="e in establecimientos" class="green"> <md-card-title> <md-card-title-text> <span class="md-headline white-text">[[e.nombre]]</span> </md-card-title-text> <md-card-title-media> <div class="md-media-lg card-media"></div> </md-card-title-media> </md-card-title> <md-card-actions layout="row" layout-align="end center"> <md-button ng-click="seleccionar(e)" class="white-text">Continuar</md-button> </md-card-actions> </md-card> </div>'),a.put("views/meteorologia.html",'<div layout-padding> <div class="md-display-1 green-text">Establecimiento <div class="md-headline grey-text">Meteorología</div> </div> </div> <section layout-md="row" layout-sm="column" layout-gt-md="row"> <md-card flex> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Pronóstico del tiempo</span> <span flex></span> <md-button class="md-icon-button" ng-click="getWeather()" aria-label="Actualizar"> <md-icon><i class="material-icons">cached</i> </md-icon> </md-button> </div> </md-toolbar> <div layout-padding> <div class="grey-text text-darken-2"><form><md-input-container style="margin: 0;padding:0"><label>Ciudad</label><input ng-model="query.q"></md-input-container><input ng-hide="true" type="submit" ng-click="getWeather()" value="Save"></form></div> <div class="grey-text text-darken-2" style="font-size: x-large;margin-bottom: 0;padding-bottom: 0">[[current.name]], [[current.sys.country]]</div> <div class="grey-text text-darken-2" style="margin-top: 0;padding-top: 0; margin-bottom: 0;padding-bottom: 0"><span style="text-transform: capitalize">[[current.dt |date:\'EEEE\']], </span>[[current.dt | date:\'longDate\']]</div> <div class="grey-text text-darken-2" style="margin-top: 0;padding-top: 0; margin-bottom: 0;padding-bottom: 0">[[current.weather[0].description]]</div> <div layout-gt-sm="row" layout-sm="row" layout-xs="column"> <div style="width: 100px;height:100px;max-height: 100px; max-width: 100px"> <img ng-src="images/weather_icons/[[current.weather[0].icon]].png" height="50"> </div> <div style="font-size: 60px"> [[current.main.temp]] ºC </div> <span flex></span> <div class="grey-text text-darken-2"> <p>Humedad: [[current.main.humidity]]%</p> <p>Viento: a [[current.wind.speed]] Km/h</p> </div> </div> </div> <div layout-padding> <md-grid-list md-cols-xs="2" md-cols-sm="3" md-cols-md="5" md-cols-gt-md="6" md-row-height-gt-md="1:1" md-row-height="2:2" md-row-height="fit"> <md-grid-tile class="grey-text" ng-repeat="dia in forecast.list"> <div layout="column" layout-align="start center"> <div flex style="text-transform: capitalize">[[dia.dt | date:\'EEEE\']] [[dia.dt | date:\'dd\']]</div> <div flex style="width: 75px;height:75px;max-height: 75px; max-width: 75px"><img ng-src="images/weather_icons/[[dia.weather[0].icon]].png" height="50"></div> <div flex style="text-align: center">[[dia.weather[0].description]]</div> <div flex><p><strong>[[dia.temp.max]]</strong>/[[dia.temp.min]] ºC</p></div> </div> </md-grid-tile> </md-grid-list> </div> </md-card> </section> <section layout-md="row" layout-sm="column" layout-gt-md="row"> <md-card flex> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedReg.length"> <div class="md-toolbar-tools"> <span>Registro de lluvia</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editReg()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedReg.length"> <div class="md-toolbar-tools"> <span>[[selectedReg.length]] [[selectedReg.length > 1 ? \'registros seleccionadas\' : \'registro seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedReg.length == 1" ng-click="editCat(selectedReg[0])" aria-label="Editar registro"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedReg.length >= 1" ng-click="deleteReg(selectedReg)" aria-label="Delete Categoria"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <md-table-container> <table md-table md-row-select multiple ng-model="selectedReg" md-progress="promiseReg"> <thead md-head md-order="queryReg.ordering" md-on-reorder="getReg"> <tr md-row md-select-id="id"> <th md-column md-order-by="fecha"><span>Fecha</span></th> <th md-column md-order-by="cantidad"><span>Cantidad (mm3)</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="reg" md-select-id="id" md-auto-select ng-repeat="reg in registros.results"> <td md-cell>[[reg.fecha | date:\'fullDate\' ]]</td> <td md-cell>[[reg.cantidad]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryReg.page" md-total="[[registros.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getReg"></md-table-pagination> </md-card> </section>'),a.put("views/mortandad.html",'<div layout="column"> <div> <h1 class="md-display-1 green-text">Manejo</h1> </div> <!-- MORTANDAD & ABIGEO --> <section ng-show="mortandades.results"> <div layout-padding> <h2 class="md-headline green-text">Mortandad y Abigeo</h2> </div> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedMortandad.length"> <div class="md-toolbar-tools"> <span>Mortandad y Abigeo</span> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedMortandad.length"> <div class="md-toolbar-tools"> <span>[[selectedMortandad.length]] [[selectedMortandad.length > 1 ? \'mortandad/abigeos seleccionados\' : \'mortandad/abigeo seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedMortandad.length == 1" ng-click="viewMortandad(selectedMortandad[0])" aria-label="Ver Mortandad"> <md-icon><i class="material-icons green-text text-darken-4">visibility</i> </md-icon> </md-button> <md-button class="md-icon-button" ng-show="selectedMortandad.length == 1" ng-click="editMortandad(selectedMortandad[0])" aria-label="Editar Mortandad"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedMortandad.length" ng-click="deleteMortandad(selectedMortandad)" aria-label="Delete Mortandad"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <md-table-container> <table md-table md-row-select multiple md-progress="promiseMortandad" ng-model="selectedMortandad"> <thead md-head md-order="queryMortandad.ordering" md-on-reorder="getMortandad"> <tr md-row md-select-id="id"> <th md-column md-order-by="fecha">Fecha</th> <th md-column md-order-by="tipo_display"><span>Tipo</span></th> <th md-column md-order-by="razon">Razón</th> <th md-column md-numeric md-order-by="animales.length">Cantidad de Animales</th> </tr> </thead> <tbody md-body> <tr md-row md-select="mortandad" md-select-id="id" md-auto-select ng-repeat="mortandad in mortandades.results"> <td md-cell>[[mortandad.fecha | date:\'dd/MM/yyyy\']]</td> <td md-cell>[[mortandad.tipo_display]]</td> <td md-cell>[[mortandad.razon]]</td> <td md-cell>[[mortandad.animales.length]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryMortandad.page" md-total="[[mortandades.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getMortandad" md-page-select></md-table-pagination> </md-card> </section> </div>'),
a.put("views/nutricion.html",'<div layout-padding> <h1 class="md-display-1 green-text">Nutrición</h1> </div> <section> <div layout-padding> <h2 class="md-headline green-text">Dietas Activas</h2> </div> <md-card layout-padding> <div layout="row"> <md-input-container class="md-block" flex> <label>Lote</label> <md-select ng-model="queryDietas.lotes" aria-label="Lote" ng-change="getDietas()"> <md-option value="todos"> Todos </md-option> <md-option ng-repeat="lote in lotes.results" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Tipo de nutrición</label> <md-select ng-model="queryDietas.tipo_nutricion" aria-label="Tipo de nutricion" ng-change="getDietas()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="tipo in [\'Cría\',\'Engorde\']" value="[[tipo]]"> [[tipo]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Raza</label> <md-select ng-model="queryAnimales.raza" aria-label="Raza" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="raza in razas.results" value="[[raza.id]]"> [[raza.nombre]] </md-option> </md-select> </md-input-container> </div> </md-card> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedDietas.length"> <div class="md-toolbar-tools"> <span>Dietas Activas</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editDieta()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedDietas.length"> <div class="md-toolbar-tools"> <span>[[selectedDietas.length]] [[selectedDietas.length > 1 ? \'dietas seleccionadas\' : \'dieta seleccionada\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedDietas.length == 1" ng-click="editDieta(selectedDietas[0])" aria-label="Editar Dieta"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedDietas.length == 1" ng-click="deleteDieta(selectedDietas[0])" aria-label="Delete Dieta"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select ng-model="selectedDietas" md-progress="promiseDietas"> <thead md-head md-order="queryDietas.ordering" md-on-reorder="getDietas"> <tr md-row md-select-id="id"> <th md-column md-order-by="fecha_inicio">Periodo</th> <th md-column md-order-by="tipo_nutricion">Tipo de Nutrición</th> <th md-column md-order-by="tipo_comida">Tipo de Alimento</th> <th md-column md-order-by="descripcion_comida">Descrip. de Alimento</th> <th md-column md-numeric md-order-by="kilos">Total kg.(p/cabeza)</th> <th md-column>Lotes</th> </tr> </thead> <tbody md-body> <tr md-row md-select="dieta" md-select-id="id" md-auto-select ng-repeat="dieta in dietas.results"> <td md-cell>[[dieta.fecha_inicio | date:\'dd/MM/yyyy\']] - [[dieta.fecha_fin | date:\'dd/MM/yyyy\']]</td> <td md-cell>[[dieta.tipo_nutricion]]</td> <td md-cell>[[dieta.tipo_comida]]</td> <td md-cell>[[dieta.descripcion_comida]]</td> <td md-cell>[[dieta.kilos]]</td> <td md-cell><div ng-repeat="lote in dieta.lotes_completo">[[lote.nombre]]</div></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryDietas.page" md-total="[[dietas.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getDietas" md-page-select></md-table-pagination> </md-card> </section>'),a.put("views/potrero.html",'<section> <div> <h1 class="md-display-1 green-text">Establecimiento</h1> </div> </section> <section> <div layout-padding> <h2 class="md-headline green-text">Potreros</h2> </div> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedPotreros.length"> <div class="md-toolbar-tools"> <span>Potreros</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editPotrero()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedPotreros.length"> <div class="md-toolbar-tools"> <span>[[selectedPotreros.length]] [[selectedPotreros.length > 1 ? \'potreros seleccionados\' : \'potrero seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedPotreros.length == 1" ng-click="editPotrero(selectedPotreros[0])" aria-label="Editar Lote"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedPotreros.length == 1" ng-click="deletePotrero(selectedPotreros[0])" aria-label="Delete Potrero"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select ng-model="selectedPotreros" md-progress="promisePotreros"> <thead md-head md-order="queryPotreros.ordering" md-on-reorder="getPotreros"> <tr md-row md-select-id="id"> <th md-column md-numeric md-order-by="id"><span>Código</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-numeric md-order-by="superficie"><span>Superficie (Ha.)</span></th> <th md-column md-order-by="uso">Uso</th> </tr> </thead> <tbody md-body> <tr md-row md-select="potrero" md-select-id="id" md-auto-select ng-repeat="potrero in potreros.results"> <td md-cell>[[potrero.id]]</td> <td md-cell>[[potrero.nombre]]</td> <td md-cell>[[potrero.superficie]]</td> <td md-cell>[[potrero.uso]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryPotreros.page" md-total="[[potreros.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getPotreros" md-page-select></md-table-pagination> </md-card> </section>'),a.put("views/raza.html",'<section> <div> <h1 class="md-display-1 green-text">Establecimiento</h1> </div> </section> <section> <div layout-padding> <h2 class="md-headline green-text">Razas</h2> </div> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedRazas.length"> <div class="md-toolbar-tools"> <span>Razas</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editRaza()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedRazas.length"> <div class="md-toolbar-tools"> <span>[[selectedRazas.length]] [[selectedRazas.length > 1 ? \'razas seleccionadas\' : \'raza seleccionada\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedRazas.length == 1" ng-click="editRaza(selectedRazas[0])" aria-label="Editar Raza"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedRazas.length >= 1" ng-click="deleteRaza(selectedRazas)" aria-label="Delete Raza"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select multiple ng-model="selectedRazas" md-progress="promiseRazas"> <thead md-head md-order="queryRazas.ordering" md-on-reorder="getRazas"> <tr md-row> <th md-column md-numeric md-order-by="id"><span>Código</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-order-by="descripcion"><span>Descripción</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="raza" md-select-id="id" ng-disabled="!raza.establecimiento" md-auto-select ng-repeat="raza in razas.results"> <td md-cell>[[raza.id]]</td> <td md-cell>[[raza.nombre]]</td> <td md-cell>[[raza.descripcion || "Sin descripción"]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryRazas.page" md-total="[[razas.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getRazas" md-page-select></md-table-pagination> </md-card> </section>'),a.put("views/sanitacion.html",'<h1 class="md-display-1 green-text">Sanitación</h1> <section> <md-card> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Calendario de Sanitación</h2> </div> </md-toolbar> <md-content> <br> <md-button ng-hide="selection.length" ng-click="agregarEvento()" class="lime-text">Agendar vacunación</md-button> <br> <div id="calendar" style="cursor:pointer"></div> </md-content> </md-card> </section>'),a.put("views/venta.html",'<div layout="column"> <div> <h1 class="md-display-1 green-text">Venta</h1> </div> <!-- LOTES --> <section> <div layout-padding> <h2 class="md-headline green-text">Venta por lotes</h2> </div> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedLotes.length"> <div class="md-toolbar-tools"> <span>Lotes</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editLote()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedLotes.length"> <div class="md-toolbar-tools"> <span>[[selectedLotes.length]] [[selectedLotes.length > 1 ? \'lotes seleccionados\' : \'lote seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedLotes.length == 1" ng-click="editLote(selectedLotes[0])" aria-label="Editar Lote"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedLotes[0].animales.length == 0" ng-click="deleteLote(selectedLotes[0])" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select ng-model="selectedLotes" md-progress="promiseLotes"> <thead md-head md-order="queryLotes.ordering" md-on-reorder="getLotes"> <tr md-row md-select-id="id"> <th md-column md-numeric md-order-by="id"><span>Código</span></th> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-order-by="potrero__nombre"><span>Potrero</span></th> <th md-column md-numeric md-order-by="peso_promedio">Peso promedio (Kg.)</th> <th md-column md-numeric md-order-by="cantidad">Cantidad</th> <th md-column>En servicio</th> <th md-column>Dietas Activas</th> </tr> </thead> <tbody md-body> <tr md-row md-select="lote" md-select-id="id" md-auto-select ng-repeat="lote in lotes.results"> <td md-cell>[[lote.id]]</td> <td md-cell>[[lote.nombre]]</td> <td md-cell>[[lote.potrero_nombre]]</td> <td md-cell>[[lote.peso_promedio]]</td> <td md-cell>[[lote.animales.length]]</td> <td md-cell>No</td> <td md-cell>Ninguna</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryLotes.page" md-total="[[lotes.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getLotes" md-page-select></md-table-pagination> </md-card> </section> <!-- ANIMALES --> <section ng-show="lotes.results.length"> <div layout-padding> <h2 class="md-headline green-text">Venta por animales</h2> </div> <md-card layout-padding> <div layout="row"> <md-input-container class="md-block" flex> <label>Lote</label> <md-select ng-model="queryAnimales.lote" aria-label="Lote" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="lote in lotes.results" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Categoria</label> <md-select ng-model="queryAnimales.categoria" aria-label="Categoria" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="cat in categorias.results" value="[[cat.id]]"> [[cat.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Raza</label> <md-select ng-model="queryAnimales.raza" aria-label="Raza" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="raza in razas.results" value="[[raza.id]]"> [[raza.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Carimbo</label> <md-select ng-model="queryAnimales.carimbo" aria-label="Carimbo" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="carimbo in [0,1,2,3,4,5,6,7,8,9]" value="[[carimbo]]"> [[carimbo]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Estado Sanitario</label> <md-select ng-model="queryAnimales.estado_sanitario" aria-label="Estado Sanitario" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="estado in estados_sanitarios" value="[[estado.c]]"> [[estado.display]] </md-option> </md-select> </md-input-container> </div> </md-card> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedAnimales.length"> <div class="md-toolbar-tools"> <span>Animales</span> <span flex></span> <md-button> <label for="file"> <md-icon><i class="material-icons">file_upload</i> </md-icon>Importar </label> </md-button> <input id="file" type="file" ng-model="model.file" change="handleFile(model)" hidden> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-hide="selection.length"> <md-button ng-click="editAnimal()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedAnimales.length"> <div class="md-toolbar-tools"> <span>[[selectedAnimales.length]] [[selectedAnimales.length > 1 ? \'animales seleccionados\' : \'animal seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedAnimales.length == 1" ng-click="editAnimal(selectedAnimales[0])" aria-label="Editar Animal"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedAnimales.length == 1" ng-click="deleteAnimal(selectedAnimales[0])" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedAnimales.length > 1" ng-click="deleteListaAnimal(selectedAnimales)" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button green-text text-darken-4" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons green-text text-darken-4">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="agruparEnLote(selectedAnimales)"> <p>Agrupar en Lote nuevo</p> </md-button> </md-menu-item> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="mudarAnimales(selectedAnimales)"> <p>Mudar a Lote existente</p> </md-button> </md-menu-item> <md-divider ng-show="selectedAnimales.length"></md-divider> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="recategorizar(selectedAnimales)"> <p>Recategorizar</p> </md-button> </md-menu-item> <md-divider ng-show="selectedAnimales.length"></md-divider> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="mortandad(selectedAnimales)"> <p>Declarar Mortandad/Abigeo</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select multiple ng-model="selectedAnimales" md-progress="promiseAnimales"> <thead md-head md-order="queryAnimales.ordering" md-on-reorder="getAnimales"> <tr md-row md-select-id="id"> <th md-column md-order-by="lote__nombre">Lote</th> <th md-column md-order-by="categoria__nombre"><span>Categoria</span></th> <th md-column md-numeric md-order-by="carimbo">Carimbo</th> <th md-column md-numeric md-order-by="peso_especifico">Peso específico (Kg.)</th> <th md-column md-order-by="estado_sanitario">Estado Sanitario</th> <th md-column md-numeric md-order-by="caravana"><span>Caravana</span></th> <th md-column md-order-by="raza__nombre">Raza</th> </tr> </thead> <tbody md-body> <tr md-row md-select="animal" md-select-id="id" md-auto-select ng-repeat="animal in animales.results"> <td md-cell>[[animal.lote_nombre || \'No asignado\']]</td> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell>[[animal.carimbo]]</td> <td md-cell>[[animal.peso_especifico]]</td> <td md-cell>[[animal.estado_sanitario_display]]</td> <td md-cell>[[animal.caravana]]</td> <td md-cell>[[animal.raza_nombre]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="queryAnimales.limit" md-limit-options="[20, 50, 100]" md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-page="queryAnimales.page" md-total="[[animales.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getAnimales"></md-table-pagination> </md-card> </section> </div>')}]);